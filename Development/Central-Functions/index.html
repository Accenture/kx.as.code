
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="KX.AS.CODE">
      
      
        <meta name="author" content="Patrick Delamere">
      
      
        <link rel="canonical" href="https://accenture.github.io/kx.as.code/Development/Central-Functions/">
      
      
        <link rel="prev" href="../Best-Practices/">
      
      
        <link rel="next" href="../Contribution-Guidelines/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.13">
    
    
      
        <title>Central Functions - KX.AS.CODE</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=arial,+sans-serif:300,300i,400,400i,700,700i%7Cmonospace:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"arial, sans-serif";--md-code-font:"monospace"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/css/custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="pink">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#central-functions" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="KX.AS.CODE" class="md-header__button md-logo" aria-label="KX.AS.CODE" data-md-component="logo">
      
  <img src="../../assets/images/kxascode_white_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            KX.AS.CODE
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Central Functions
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Accenture/kx.as.code" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="KX.AS.CODE" class="md-nav__button md-logo" aria-label="KX.AS.CODE" data-md-component="logo">
      
  <img src="../../assets/images/kxascode_white_logo.png" alt="logo">

    </a>
    KX.AS.CODE
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Accenture/kx.as.code" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome!
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Quick-Start-Guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start Guide
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Overview
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Overview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Overview/Architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Overview/Application-Library/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application Library
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Overview/Concepts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Concepts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Overview/Future-Roadmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Roadmap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Overview/Questions-and-Answers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Questions and Answers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Overview/Raising-a-Bug-Report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Raising a Bug Report
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Overview/Raising-a-Feature-Request/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Raising a Feature Request
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Overview/Networking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Networking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Overview/Orchestrators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Orchestrators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Overview/IAM-and-SSO/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IAM and SSO
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Overview/Storage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Storage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Overview/Task-Executions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task Executions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Overview/Use-Case-Example/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Use Case Example
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Build
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Build
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Build/Local-Virtualizations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Local Virtualization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Build/Raspberry-Pi-Cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Raspberry Pi Cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Build/Private-Clouds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Private Clouds
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Build/Public-Clouds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Public Cloud
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Deployment
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Deployment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Deployment/Configuration-Options/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Profile Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Deployment/Customizing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Customizing KX.AS.CODE
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Deployment/Deployment-Profiles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deployment Profiles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Deployment/External-Application-Access/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    External Application Access
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Deployment/Initial-Setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Initialize Launcher
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Deployment/Local-Virtualizations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Local Virtualization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Deployment/Raspberry-Pi-Cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Raspberry Pi Cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Deployment/Manual-Provisioning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Manual Provisioning
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Deployment/Minimal-Deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Minimal Deployment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Deployment/Private-Clouds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Private Cloud
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Deployment/Provisioning-Flow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation Flow
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Deployment/Provisioning-Templates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation Groups
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Deployment/Public-Clouds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Public Cloud
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Deployment/Remote-Access/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remote Access
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Deployment/Troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Deployment/User-Management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User Management
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Development
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Adding-a-Solution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Adding a Solution
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Best-Practices/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Best Practices
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Central Functions
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Central Functions
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#application-deployments" class="md-nav__link">
    <span class="md-ellipsis">
      Application Deployments
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Application Deployments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#applicationdeploymenthealthcheck" class="md-nav__link">
    <span class="md-ellipsis">
      applicationDeploymentHealthCheck()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#autosetupargocdinstall" class="md-nav__link">
    <span class="md-ellipsis">
      autoSetupArgoCdInstall()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#autosetuphelminstall" class="md-nav__link">
    <span class="md-ellipsis">
      autoSetupHelmInstall()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#autosetuppreinstallsteps" class="md-nav__link">
    <span class="md-ellipsis">
      autoSetupPreInstallSteps()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#autosetupscriptinstall" class="md-nav__link">
    <span class="md-ellipsis">
      autoSetupScriptInstall()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createdesktopicon" class="md-nav__link">
    <span class="md-ellipsis">
      createDesktopIcon()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkrunningkubernetespods" class="md-nav__link">
    <span class="md-ellipsis">
      checkRunningKubernetesPods()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createkubernetesnamespace" class="md-nav__link">
    <span class="md-ellipsis">
      createKubernetesNamespace()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployyamlfilestokubernetes" class="md-nav__link">
    <span class="md-ellipsis">
      deployYamlFilesToKubernetes()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#argocd" class="md-nav__link">
    <span class="md-ellipsis">
      ArgoCD
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ArgoCD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#argocdlogin" class="md-nav__link">
    <span class="md-ellipsis">
      argoCdLogin()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Core Setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#applycustomizations" class="md-nav__link">
    <span class="md-ellipsis">
      applyCustomizations()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#autosetupexecutetask" class="md-nav__link">
    <span class="md-ellipsis">
      autoSetupExecuteTask()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizeimage" class="md-nav__link">
    <span class="md-ellipsis">
      customizeImage()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getcustomvariables" class="md-nav__link">
    <span class="md-ellipsis">
      getCustomVariables()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#populateactionqueuesjson" class="md-nav__link">
    <span class="md-ellipsis">
      populateActionQueuesJson()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#populateactionqueuesrabbitmq" class="md-nav__link">
    <span class="md-ellipsis">
      populateActionQueuesRabbitMq()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkandupdatebasepassword" class="md-nav__link">
    <span class="md-ellipsis">
      checkAndUpdateBasePassword()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkandupdatebaseusername" class="md-nav__link">
    <span class="md-ellipsis">
      checkAndUpdateBaseUsername()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkglusterfsserviceinstalled" class="md-nav__link">
    <span class="md-ellipsis">
      checkGlusterFsServiceInstalled()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configurebinddns" class="md-nav__link">
    <span class="md-ellipsis">
      configureBindDns()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configurekeyboardsettings" class="md-nav__link">
    <span class="md-ellipsis">
      configureKeyboardSettings()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configurenetwork" class="md-nav__link">
    <span class="md-ellipsis">
      configureNetwork()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createexternalaccessdirectory" class="md-nav__link">
    <span class="md-ellipsis">
      createExternalAccessDirectory()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disablelinuxdesktop" class="md-nav__link">
    <span class="md-ellipsis">
      disableLinuxDesktop()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getcomponentinstallationproperties" class="md-nav__link">
    <span class="md-ellipsis">
      getComponentInstallationProperties()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getglobalvariables" class="md-nav__link">
    <span class="md-ellipsis">
      getGlobalVariables()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getnetworkconfiguration" class="md-nav__link">
    <span class="md-ellipsis">
      getNetworkConfiguration()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getprofileconfiguration" class="md-nav__link">
    <span class="md-ellipsis">
      getProfileConfiguration()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getversions" class="md-nav__link">
    <span class="md-ellipsis">
      getVersions()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gnupginitializeuser" class="md-nav__link">
    <span class="md-ellipsis">
      gnupgInitializeUser()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installenvhandlebars" class="md-nav__link">
    <span class="md-ellipsis">
      installEnvhandlebars()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executepostinstallscripts" class="md-nav__link">
    <span class="md-ellipsis">
      executePostInstallScripts()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postinstallstepletsencrypt" class="md-nav__link">
    <span class="md-ellipsis">
      postInstallStepLetsEncrypt()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setlogfilename" class="md-nav__link">
    <span class="md-ellipsis">
      setLogFilename()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updatehostfileforexternaluse" class="md-nav__link">
    <span class="md-ellipsis">
      updateHostFileForExternalUse()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updatekxsourceonfirststart" class="md-nav__link">
    <span class="md-ellipsis">
      updateKxSourceOnFirstStart()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updatestorageclassifneeded" class="md-nav__link">
    <span class="md-ellipsis">
      updateStorageClassIfNeeded()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#waitformessageonactionqueue" class="md-nav__link">
    <span class="md-ellipsis">
      waitForMessageOnActionQueue()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#credential-management" class="md-nav__link">
    <span class="md-ellipsis">
      Credential Management
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Credential Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deletepassword" class="md-nav__link">
    <span class="md-ellipsis">
      deletePassword()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generateapikey" class="md-nav__link">
    <span class="md-ellipsis">
      generateApiKey()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#managedapikey" class="md-nav__link">
    <span class="md-ellipsis">
      managedApiKey()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generatepassword" class="md-nav__link">
    <span class="md-ellipsis">
      generatePassword()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getpassword" class="md-nav__link">
    <span class="md-ellipsis">
      getPassword()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#managedpassword" class="md-nav__link">
    <span class="md-ellipsis">
      managedPassword()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pushpassword" class="md-nav__link">
    <span class="md-ellipsis">
      pushPassword()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#renewapikey" class="md-nav__link">
    <span class="md-ellipsis">
      renewApiKey()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-registry" class="md-nav__link">
    <span class="md-ellipsis">
      Docker Registry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Docker Registry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dockerregistryadduser" class="md-nav__link">
    <span class="md-ellipsis">
      dockerRegistryAddUser()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dockercoreregistrychecktagexists" class="md-nav__link">
    <span class="md-ellipsis">
      dockerCoreRegistryCheckTagExists()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createk8scredentialsecretforcoreregistry" class="md-nav__link">
    <span class="md-ellipsis">
      createK8sCredentialSecretForCoreRegistry()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logintocoreregistry" class="md-nav__link">
    <span class="md-ellipsis">
      loginToCoreRegistry()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pushdockerimagetocoreregistry" class="md-nav__link">
    <span class="md-ellipsis">
      pushDockerImageToCoreRegistry()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-helpers" class="md-nav__link">
    <span class="md-ellipsis">
      General Helpers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="General Helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#addkxcertssecrettonamespace" class="md-nav__link">
    <span class="md-ellipsis">
      addKxCertsSecretToNamespace()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkapplicationinstalled" class="md-nav__link">
    <span class="md-ellipsis">
      checkApplicationInstalled()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkimagefiletype" class="md-nav__link">
    <span class="md-ellipsis">
      checkImageFileType()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#functionstart" class="md-nav__link">
    <span class="md-ellipsis">
      functionStart()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#functionend" class="md-nav__link">
    <span class="md-ellipsis">
      functionEnd()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getcpuarchitecture" class="md-nav__link">
    <span class="md-ellipsis">
      getCpuArchitecture()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getnginxcontrollerip" class="md-nav__link">
    <span class="md-ellipsis">
      getNginxControllerIp()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kubernetesgetserviceloadbalancerip" class="md-nav__link">
    <span class="md-ellipsis">
      kubernetesGetServiceLoadBalancerIp()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installdebianpackage" class="md-nav__link">
    <span class="md-ellipsis">
      installDebianPackage()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#roundup" class="md-nav__link">
    <span class="md-ellipsis">
      roundUp()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkdockerhubratelimit" class="md-nav__link">
    <span class="md-ellipsis">
      checkDockerHubRateLimit()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#downloadfile" class="md-nav__link">
    <span class="md-ellipsis">
      downloadFile()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#waitforfile" class="md-nav__link">
    <span class="md-ellipsis">
      waitForFile()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkurlhealth" class="md-nav__link">
    <span class="md-ellipsis">
      checkUrlHealth()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gitlab" class="md-nav__link">
    <span class="md-ellipsis">
      Gitlab
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gitlab">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creategitlabproject" class="md-nav__link">
    <span class="md-ellipsis">
      createGitlabProject()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitlabcreategroup" class="md-nav__link">
    <span class="md-ellipsis">
      gitlabCreateGroup()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitlabcreategroupvariable" class="md-nav__link">
    <span class="md-ellipsis">
      gitlabCreateGroupVariable()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitlabcreateuser" class="md-nav__link">
    <span class="md-ellipsis">
      gitlabCreateUser()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitlabgetgroupid" class="md-nav__link">
    <span class="md-ellipsis">
      gitlabGetGroupId()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitlabgetuserid" class="md-nav__link">
    <span class="md-ellipsis">
      gitlabGetUserId()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitlabmapusertogroup" class="md-nav__link">
    <span class="md-ellipsis">
      gitlabMapUserToGroup()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#populategitlabproject" class="md-nav__link">
    <span class="md-ellipsis">
      populateGitlabProject()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#harbor" class="md-nav__link">
    <span class="md-ellipsis">
      Harbor
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Harbor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#harborcreateproject" class="md-nav__link">
    <span class="md-ellipsis">
      harborCreateProject()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#harborcreaterobotaccount" class="md-nav__link">
    <span class="md-ellipsis">
      harborCreateRobotAccount()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#harborgetprojectid" class="md-nav__link">
    <span class="md-ellipsis">
      harborGetProjectId()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keycloak-iamsso" class="md-nav__link">
    <span class="md-ellipsis">
      Keycloak IAM/SSO
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Keycloak IAM/SSO">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#createkeycloakclient" class="md-nav__link">
    <span class="md-ellipsis">
      createKeycloakClient()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createkeycloakclientscope" class="md-nav__link">
    <span class="md-ellipsis">
      createKeycloakClientScope()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createkeycloakgroup" class="md-nav__link">
    <span class="md-ellipsis">
      createKeycloakGroup()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createkeycloakprotocolmapper" class="md-nav__link">
    <span class="md-ellipsis">
      createKeycloakProtocolMapper()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createkeycloakuser" class="md-nav__link">
    <span class="md-ellipsis">
      createKeycloakUser()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enablekeycloakssoforsolution" class="md-nav__link">
    <span class="md-ellipsis">
      enableKeycloakSSOForSolution()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getkeycloakclientid" class="md-nav__link">
    <span class="md-ellipsis">
      getKeycloakClientId()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getkeycloakclientsecret" class="md-nav__link">
    <span class="md-ellipsis">
      getKeycloakClientSecret()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keycloaklogin" class="md-nav__link">
    <span class="md-ellipsis">
      keycloakLogin()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mapkeycloakusertogroup" class="md-nav__link">
    <span class="md-ellipsis">
      mapKeycloakUserToGroup()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sourcekeycloakenvironment" class="md-nav__link">
    <span class="md-ellipsis">
      sourceKeycloakEnvironment()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kubernetes" class="md-nav__link">
    <span class="md-ellipsis">
      Kubernetes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Kubernetes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kubernetesapplyyamlfile" class="md-nav__link">
    <span class="md-ellipsis">
      kubernetesApplyYamlFile()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kubernetesexportresource" class="md-nav__link">
    <span class="md-ellipsis">
      kubernetesExportResource()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kuberneteshealthcheck" class="md-nav__link">
    <span class="md-ellipsis">
      kubernetesHealthCheck()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#waitforkubernetesresource" class="md-nav__link">
    <span class="md-ellipsis">
      waitForKubernetesResource()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging" class="md-nav__link">
    <span class="md-ellipsis">
      Logging
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Logging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#log_debug" class="md-nav__link">
    <span class="md-ellipsis">
      log_debug()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log_error" class="md-nav__link">
    <span class="md-ellipsis">
      log_error()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log_info" class="md-nav__link">
    <span class="md-ellipsis">
      log_info()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log_warn" class="md-nav__link">
    <span class="md-ellipsis">
      log_warn()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mattermost" class="md-nav__link">
    <span class="md-ellipsis">
      Mattermost
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Mattermost">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mattermostcreatechannel" class="md-nav__link">
    <span class="md-ellipsis">
      mattermostCreateChannel()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mattermostcreateteam" class="md-nav__link">
    <span class="md-ellipsis">
      mattermostCreateTeam()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mattermostcreateuser" class="md-nav__link">
    <span class="md-ellipsis">
      mattermostCreateUser()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mattermostcreatewebhook" class="md-nav__link">
    <span class="md-ellipsis">
      mattermostCreateWebhook()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mattermostgetchannelid" class="md-nav__link">
    <span class="md-ellipsis">
      mattermostGetChannelId()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mattermostgetlogintoken" class="md-nav__link">
    <span class="md-ellipsis">
      mattermostGetLoginToken()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mattermostgetteamid" class="md-nav__link">
    <span class="md-ellipsis">
      mattermostGetTeamId()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mattermostgetuserid" class="md-nav__link">
    <span class="md-ellipsis">
      mattermostGetUserId()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mattermostmapusertoteam" class="md-nav__link">
    <span class="md-ellipsis">
      mattermostMapUserToTeam()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minio-s3" class="md-nav__link">
    <span class="md-ellipsis">
      MinIO-S3
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MinIO-S3">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#minios3createbucket" class="md-nav__link">
    <span class="md-ellipsis">
      minioS3CreateBucket()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minios3createserviceaccount" class="md-nav__link">
    <span class="md-ellipsis">
      minioS3CreateServiceAccount()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minios3createtenant" class="md-nav__link">
    <span class="md-ellipsis">
      minioS3CreateTenant()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minios3getaccessandsecretkeys" class="md-nav__link">
    <span class="md-ellipsis">
      minioS3GetAccessAndSecretKeys()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minios3initialize" class="md-nav__link">
    <span class="md-ellipsis">
      minioS3Initialize()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notifications" class="md-nav__link">
    <span class="md-ellipsis">
      Notifications
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Notifications">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#addtonotificationqueue" class="md-nav__link">
    <span class="md-ellipsis">
      addToNotificationQueue()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notify" class="md-nav__link">
    <span class="md-ellipsis">
      notify()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notifyallchannels" class="md-nav__link">
    <span class="md-ellipsis">
      notifyAllChannels()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rabbitmq-core-setup" class="md-nav__link">
    <span class="md-ellipsis">
      RabbitMQ Core Setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RabbitMQ Core Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#checkrabbitmq" class="md-nav__link">
    <span class="md-ellipsis">
      checkRabbitMq()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createrabbitmqexchange" class="md-nav__link">
    <span class="md-ellipsis">
      createRabbitMQExchange()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createrabbitmqqueues" class="md-nav__link">
    <span class="md-ellipsis">
      createRabbitMQQueues()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createrabbitmqworkflowbindings" class="md-nav__link">
    <span class="md-ellipsis">
      createRabbitMQWorkflowBindings()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Contribution-Guidelines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contribute
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Debugging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debugging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Releasing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Releasing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Solution-Metadata/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Solution Metadata
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Prerequisites
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Prerequisites
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Prerequisites/OpenStack-Setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setting up DevStack
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#application-deployments" class="md-nav__link">
    <span class="md-ellipsis">
      Application Deployments
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Application Deployments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#applicationdeploymenthealthcheck" class="md-nav__link">
    <span class="md-ellipsis">
      applicationDeploymentHealthCheck()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#autosetupargocdinstall" class="md-nav__link">
    <span class="md-ellipsis">
      autoSetupArgoCdInstall()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#autosetuphelminstall" class="md-nav__link">
    <span class="md-ellipsis">
      autoSetupHelmInstall()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#autosetuppreinstallsteps" class="md-nav__link">
    <span class="md-ellipsis">
      autoSetupPreInstallSteps()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#autosetupscriptinstall" class="md-nav__link">
    <span class="md-ellipsis">
      autoSetupScriptInstall()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createdesktopicon" class="md-nav__link">
    <span class="md-ellipsis">
      createDesktopIcon()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkrunningkubernetespods" class="md-nav__link">
    <span class="md-ellipsis">
      checkRunningKubernetesPods()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createkubernetesnamespace" class="md-nav__link">
    <span class="md-ellipsis">
      createKubernetesNamespace()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployyamlfilestokubernetes" class="md-nav__link">
    <span class="md-ellipsis">
      deployYamlFilesToKubernetes()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#argocd" class="md-nav__link">
    <span class="md-ellipsis">
      ArgoCD
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ArgoCD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#argocdlogin" class="md-nav__link">
    <span class="md-ellipsis">
      argoCdLogin()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Core Setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#applycustomizations" class="md-nav__link">
    <span class="md-ellipsis">
      applyCustomizations()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#autosetupexecutetask" class="md-nav__link">
    <span class="md-ellipsis">
      autoSetupExecuteTask()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizeimage" class="md-nav__link">
    <span class="md-ellipsis">
      customizeImage()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getcustomvariables" class="md-nav__link">
    <span class="md-ellipsis">
      getCustomVariables()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#populateactionqueuesjson" class="md-nav__link">
    <span class="md-ellipsis">
      populateActionQueuesJson()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#populateactionqueuesrabbitmq" class="md-nav__link">
    <span class="md-ellipsis">
      populateActionQueuesRabbitMq()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkandupdatebasepassword" class="md-nav__link">
    <span class="md-ellipsis">
      checkAndUpdateBasePassword()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkandupdatebaseusername" class="md-nav__link">
    <span class="md-ellipsis">
      checkAndUpdateBaseUsername()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkglusterfsserviceinstalled" class="md-nav__link">
    <span class="md-ellipsis">
      checkGlusterFsServiceInstalled()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configurebinddns" class="md-nav__link">
    <span class="md-ellipsis">
      configureBindDns()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configurekeyboardsettings" class="md-nav__link">
    <span class="md-ellipsis">
      configureKeyboardSettings()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configurenetwork" class="md-nav__link">
    <span class="md-ellipsis">
      configureNetwork()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createexternalaccessdirectory" class="md-nav__link">
    <span class="md-ellipsis">
      createExternalAccessDirectory()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disablelinuxdesktop" class="md-nav__link">
    <span class="md-ellipsis">
      disableLinuxDesktop()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getcomponentinstallationproperties" class="md-nav__link">
    <span class="md-ellipsis">
      getComponentInstallationProperties()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getglobalvariables" class="md-nav__link">
    <span class="md-ellipsis">
      getGlobalVariables()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getnetworkconfiguration" class="md-nav__link">
    <span class="md-ellipsis">
      getNetworkConfiguration()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getprofileconfiguration" class="md-nav__link">
    <span class="md-ellipsis">
      getProfileConfiguration()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getversions" class="md-nav__link">
    <span class="md-ellipsis">
      getVersions()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gnupginitializeuser" class="md-nav__link">
    <span class="md-ellipsis">
      gnupgInitializeUser()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installenvhandlebars" class="md-nav__link">
    <span class="md-ellipsis">
      installEnvhandlebars()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executepostinstallscripts" class="md-nav__link">
    <span class="md-ellipsis">
      executePostInstallScripts()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postinstallstepletsencrypt" class="md-nav__link">
    <span class="md-ellipsis">
      postInstallStepLetsEncrypt()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setlogfilename" class="md-nav__link">
    <span class="md-ellipsis">
      setLogFilename()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updatehostfileforexternaluse" class="md-nav__link">
    <span class="md-ellipsis">
      updateHostFileForExternalUse()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updatekxsourceonfirststart" class="md-nav__link">
    <span class="md-ellipsis">
      updateKxSourceOnFirstStart()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updatestorageclassifneeded" class="md-nav__link">
    <span class="md-ellipsis">
      updateStorageClassIfNeeded()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#waitformessageonactionqueue" class="md-nav__link">
    <span class="md-ellipsis">
      waitForMessageOnActionQueue()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#credential-management" class="md-nav__link">
    <span class="md-ellipsis">
      Credential Management
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Credential Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deletepassword" class="md-nav__link">
    <span class="md-ellipsis">
      deletePassword()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generateapikey" class="md-nav__link">
    <span class="md-ellipsis">
      generateApiKey()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#managedapikey" class="md-nav__link">
    <span class="md-ellipsis">
      managedApiKey()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generatepassword" class="md-nav__link">
    <span class="md-ellipsis">
      generatePassword()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getpassword" class="md-nav__link">
    <span class="md-ellipsis">
      getPassword()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#managedpassword" class="md-nav__link">
    <span class="md-ellipsis">
      managedPassword()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pushpassword" class="md-nav__link">
    <span class="md-ellipsis">
      pushPassword()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#renewapikey" class="md-nav__link">
    <span class="md-ellipsis">
      renewApiKey()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-registry" class="md-nav__link">
    <span class="md-ellipsis">
      Docker Registry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Docker Registry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dockerregistryadduser" class="md-nav__link">
    <span class="md-ellipsis">
      dockerRegistryAddUser()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dockercoreregistrychecktagexists" class="md-nav__link">
    <span class="md-ellipsis">
      dockerCoreRegistryCheckTagExists()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createk8scredentialsecretforcoreregistry" class="md-nav__link">
    <span class="md-ellipsis">
      createK8sCredentialSecretForCoreRegistry()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logintocoreregistry" class="md-nav__link">
    <span class="md-ellipsis">
      loginToCoreRegistry()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pushdockerimagetocoreregistry" class="md-nav__link">
    <span class="md-ellipsis">
      pushDockerImageToCoreRegistry()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-helpers" class="md-nav__link">
    <span class="md-ellipsis">
      General Helpers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="General Helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#addkxcertssecrettonamespace" class="md-nav__link">
    <span class="md-ellipsis">
      addKxCertsSecretToNamespace()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkapplicationinstalled" class="md-nav__link">
    <span class="md-ellipsis">
      checkApplicationInstalled()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkimagefiletype" class="md-nav__link">
    <span class="md-ellipsis">
      checkImageFileType()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#functionstart" class="md-nav__link">
    <span class="md-ellipsis">
      functionStart()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#functionend" class="md-nav__link">
    <span class="md-ellipsis">
      functionEnd()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getcpuarchitecture" class="md-nav__link">
    <span class="md-ellipsis">
      getCpuArchitecture()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getnginxcontrollerip" class="md-nav__link">
    <span class="md-ellipsis">
      getNginxControllerIp()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kubernetesgetserviceloadbalancerip" class="md-nav__link">
    <span class="md-ellipsis">
      kubernetesGetServiceLoadBalancerIp()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installdebianpackage" class="md-nav__link">
    <span class="md-ellipsis">
      installDebianPackage()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#roundup" class="md-nav__link">
    <span class="md-ellipsis">
      roundUp()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkdockerhubratelimit" class="md-nav__link">
    <span class="md-ellipsis">
      checkDockerHubRateLimit()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#downloadfile" class="md-nav__link">
    <span class="md-ellipsis">
      downloadFile()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#waitforfile" class="md-nav__link">
    <span class="md-ellipsis">
      waitForFile()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkurlhealth" class="md-nav__link">
    <span class="md-ellipsis">
      checkUrlHealth()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gitlab" class="md-nav__link">
    <span class="md-ellipsis">
      Gitlab
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gitlab">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creategitlabproject" class="md-nav__link">
    <span class="md-ellipsis">
      createGitlabProject()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitlabcreategroup" class="md-nav__link">
    <span class="md-ellipsis">
      gitlabCreateGroup()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitlabcreategroupvariable" class="md-nav__link">
    <span class="md-ellipsis">
      gitlabCreateGroupVariable()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitlabcreateuser" class="md-nav__link">
    <span class="md-ellipsis">
      gitlabCreateUser()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitlabgetgroupid" class="md-nav__link">
    <span class="md-ellipsis">
      gitlabGetGroupId()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitlabgetuserid" class="md-nav__link">
    <span class="md-ellipsis">
      gitlabGetUserId()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitlabmapusertogroup" class="md-nav__link">
    <span class="md-ellipsis">
      gitlabMapUserToGroup()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#populategitlabproject" class="md-nav__link">
    <span class="md-ellipsis">
      populateGitlabProject()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#harbor" class="md-nav__link">
    <span class="md-ellipsis">
      Harbor
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Harbor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#harborcreateproject" class="md-nav__link">
    <span class="md-ellipsis">
      harborCreateProject()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#harborcreaterobotaccount" class="md-nav__link">
    <span class="md-ellipsis">
      harborCreateRobotAccount()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#harborgetprojectid" class="md-nav__link">
    <span class="md-ellipsis">
      harborGetProjectId()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keycloak-iamsso" class="md-nav__link">
    <span class="md-ellipsis">
      Keycloak IAM/SSO
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Keycloak IAM/SSO">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#createkeycloakclient" class="md-nav__link">
    <span class="md-ellipsis">
      createKeycloakClient()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createkeycloakclientscope" class="md-nav__link">
    <span class="md-ellipsis">
      createKeycloakClientScope()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createkeycloakgroup" class="md-nav__link">
    <span class="md-ellipsis">
      createKeycloakGroup()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createkeycloakprotocolmapper" class="md-nav__link">
    <span class="md-ellipsis">
      createKeycloakProtocolMapper()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createkeycloakuser" class="md-nav__link">
    <span class="md-ellipsis">
      createKeycloakUser()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enablekeycloakssoforsolution" class="md-nav__link">
    <span class="md-ellipsis">
      enableKeycloakSSOForSolution()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getkeycloakclientid" class="md-nav__link">
    <span class="md-ellipsis">
      getKeycloakClientId()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getkeycloakclientsecret" class="md-nav__link">
    <span class="md-ellipsis">
      getKeycloakClientSecret()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keycloaklogin" class="md-nav__link">
    <span class="md-ellipsis">
      keycloakLogin()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mapkeycloakusertogroup" class="md-nav__link">
    <span class="md-ellipsis">
      mapKeycloakUserToGroup()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sourcekeycloakenvironment" class="md-nav__link">
    <span class="md-ellipsis">
      sourceKeycloakEnvironment()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kubernetes" class="md-nav__link">
    <span class="md-ellipsis">
      Kubernetes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Kubernetes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kubernetesapplyyamlfile" class="md-nav__link">
    <span class="md-ellipsis">
      kubernetesApplyYamlFile()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kubernetesexportresource" class="md-nav__link">
    <span class="md-ellipsis">
      kubernetesExportResource()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kuberneteshealthcheck" class="md-nav__link">
    <span class="md-ellipsis">
      kubernetesHealthCheck()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#waitforkubernetesresource" class="md-nav__link">
    <span class="md-ellipsis">
      waitForKubernetesResource()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging" class="md-nav__link">
    <span class="md-ellipsis">
      Logging
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Logging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#log_debug" class="md-nav__link">
    <span class="md-ellipsis">
      log_debug()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log_error" class="md-nav__link">
    <span class="md-ellipsis">
      log_error()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log_info" class="md-nav__link">
    <span class="md-ellipsis">
      log_info()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log_warn" class="md-nav__link">
    <span class="md-ellipsis">
      log_warn()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mattermost" class="md-nav__link">
    <span class="md-ellipsis">
      Mattermost
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Mattermost">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mattermostcreatechannel" class="md-nav__link">
    <span class="md-ellipsis">
      mattermostCreateChannel()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mattermostcreateteam" class="md-nav__link">
    <span class="md-ellipsis">
      mattermostCreateTeam()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mattermostcreateuser" class="md-nav__link">
    <span class="md-ellipsis">
      mattermostCreateUser()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mattermostcreatewebhook" class="md-nav__link">
    <span class="md-ellipsis">
      mattermostCreateWebhook()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mattermostgetchannelid" class="md-nav__link">
    <span class="md-ellipsis">
      mattermostGetChannelId()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mattermostgetlogintoken" class="md-nav__link">
    <span class="md-ellipsis">
      mattermostGetLoginToken()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mattermostgetteamid" class="md-nav__link">
    <span class="md-ellipsis">
      mattermostGetTeamId()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mattermostgetuserid" class="md-nav__link">
    <span class="md-ellipsis">
      mattermostGetUserId()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mattermostmapusertoteam" class="md-nav__link">
    <span class="md-ellipsis">
      mattermostMapUserToTeam()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minio-s3" class="md-nav__link">
    <span class="md-ellipsis">
      MinIO-S3
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MinIO-S3">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#minios3createbucket" class="md-nav__link">
    <span class="md-ellipsis">
      minioS3CreateBucket()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minios3createserviceaccount" class="md-nav__link">
    <span class="md-ellipsis">
      minioS3CreateServiceAccount()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minios3createtenant" class="md-nav__link">
    <span class="md-ellipsis">
      minioS3CreateTenant()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minios3getaccessandsecretkeys" class="md-nav__link">
    <span class="md-ellipsis">
      minioS3GetAccessAndSecretKeys()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minios3initialize" class="md-nav__link">
    <span class="md-ellipsis">
      minioS3Initialize()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notifications" class="md-nav__link">
    <span class="md-ellipsis">
      Notifications
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Notifications">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#addtonotificationqueue" class="md-nav__link">
    <span class="md-ellipsis">
      addToNotificationQueue()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notify" class="md-nav__link">
    <span class="md-ellipsis">
      notify()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notifyallchannels" class="md-nav__link">
    <span class="md-ellipsis">
      notifyAllChannels()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rabbitmq-core-setup" class="md-nav__link">
    <span class="md-ellipsis">
      RabbitMQ Core Setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RabbitMQ Core Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#checkrabbitmq" class="md-nav__link">
    <span class="md-ellipsis">
      checkRabbitMq()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createrabbitmqexchange" class="md-nav__link">
    <span class="md-ellipsis">
      createRabbitMQExchange()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createrabbitmqqueues" class="md-nav__link">
    <span class="md-ellipsis">
      createRabbitMQQueues()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createrabbitmqworkflowbindings" class="md-nav__link">
    <span class="md-ellipsis">
      createRabbitMQWorkflowBindings()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="central-functions">Central Functions<a class="headerlink" href="#central-functions" title="Permanent link">#</a></h1>
<p>The functions below can be used when creating scripts to install new solutions in the <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup" target="_blank">auto-setup</a> folder.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>The core setup functions are used during the initial KX.AS.CODE deployment only, and should not be used for regular component installations, eg. those in the other category folders, such as cicd, collaboration, monitoring, and so on.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can override functions by copying them to the auto-setup/functions-custom folder. This is
recommended, to avoid upgrade issues in future.</p>
<p>As well as overriding existing functions, new custom functions should also be dropped to the functions-custom folder.</p>
<p>If you develop a new function that would be interesting to the wider community, then create a PR and lets add it to the main functions directory.</p>
</div>
<p>Here a quick table of contents, listing the function groups for easier navigation and overview.</p>
<ol>
<li><a href="#application-deployments">Application Deployments</a></li>
<li><a href="#argocd">ArgoCD</a></li>
<li><a href="#core-setup">Core Setup</a></li>
<li><a href="#credential-management">Credential Management</a></li>
<li><a href="#docker-registry">Docker Registry</a></li>
<li><a href="#general-helpers">General Helpers</a></li>
<li><a href="#gitlab">Gitlab</a></li>
<li><a href="#harbor">Harbor</a></li>
<li><a href="#keycloak-iamsso">Keycloak IAM/SSO</a></li>
<li><a href="#kubernetes">Kubernetes</a></li>
<li><a href="#logging">Logging</a></li>
<li><a href="#mattermost">Mattermost</a></li>
<li><a href="#minio-s3">MinIO-S3</a></li>
<li><a href="#notifications">Notifications</a></li>
<li><a href="#rabbitmq-core-setup">RabbitMQ Core Setup</a></li>
</ol>
<h2 id="application-deployments">Application Deployments<a class="headerlink" href="#application-deployments" title="Permanent link">#</a></h2>
<p>These functions are executed by the KX.AS.CODE <a href="https://github.com/Accenture/kx.as.code/blob/main/auto-setup/autoSetup.sh" target="_blank">autoSetup.sh</a> auto-setup framework and do not need to be called individually by any of the custom component installation scripts.</p>
<h3 id="applicationdeploymenthealthcheck">applicationDeploymentHealthCheck()<a class="headerlink" href="#applicationdeploymenthealthcheck" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/applicationDeploymentHealthCheck.sh" target="_blank">auto-setup/functions/applicationDeploymentHealthCheck.sh</a></p>
<p>This executes a health-check based on the application URL [0] found in the <code>metadata.json</code> of the component being installed.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>There are no inputs to this function, as all the needed data comes from the component's <code>metadata.json</code>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Here an example extract from Gitlab's <code>metadata.json</code>
The JSON below defines both the Kubernetes <code>liveliness</code> check and the <code>readiness</code> checks. You can read more about Kubernetes health probes <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/#define-a-liveness-http-request" target="_blank">here</a>.
This one defines the following:</p>
<ul>
<li>URL path to access (will be appended to the base url)</li>
<li>Expected HTTP response  code</li>
<li>Expected JSON response text given json-path</li>
</ul>
<p>As you can see in the JSON, there are more options available. These will be described on another page, which describes in detail the contents of the <code>metadata.json</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">&quot;urls&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://{{componentName}}.{{baseDomain}}&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;healthchecks&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;liveliness&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;http_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/-/readiness&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;http_auth_required&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;expected_http_response_code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;200&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;expected_http_response_string&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;expected_json_response&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;json_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;.status&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;json_value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ok&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;health_shell_check_command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;expected_shell_check_command_response&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;readiness&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;http_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/-/readiness&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;http_auth_required&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;expected_http_response_code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;200&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;expected_http_response_string&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;expected_json_response&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;json_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;.status&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;json_value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ok&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>applicationDeploymentHealthCheck</code></p>
</div>
<h3 id="autosetupargocdinstall">autoSetupArgoCdInstall()<a class="headerlink" href="#autosetupargocdinstall" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/autoSetupArgoCdInstall.sh" target="_blank">auto-setup/functions/autoSetupArgoCdInstall.sh</a></p>
<div class="admonition danger">
<p class="admonition-title">Important</p>
<p>Note. You must deploy the <code>ArgoCD</code> application, before executing any component installations that depend on <code>ArgoCD</code></p>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>There are no inputs to this function, as all the needed data comes from the component's <code>metadata.json</code>.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Here an example snippet from a <code>metadata.json</code> for executing an application deployment with <code>ArgoCD</code>.</p>
<p>The JSON below shows an example for deploying .</p>
<p>The JSON shown here will described on another page, which describes in detail the contents of the <code>metadata.json</code>.
Read up on <a href="https://argo-cd.readthedocs.io/en/stable/core_concepts/" target="_blank">ArgoCD's core concepts</a> to understand better the parameters below.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;myApp&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;namespace&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;devops&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;installation_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;argocd&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;installation_group_folder&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;kx_as_code&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;argocd_params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;repository&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{{gitUrl}}/kx.as.code/kx.as.code_docs.git&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;kubernetes&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;dest_server&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://kubernetes.default.svc&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;dest_namespace&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;devops&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;sync_policy&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;automated&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;auto_prune&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;self_heal&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="autosetuphelminstall">autoSetupHelmInstall()<a class="headerlink" href="#autosetuphelminstall" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/autoSetupHelmInstall.sh" target="_blank">auto-setup/functions/autoSetupHelmInstall.sh</a></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>There are no inputs to this function, as all the needed data comes from the component's <code>metadata.json</code> and <code>values_template.yaml</code> file.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Here an example extract from ArgoCD's <code>metadata.json</code>"</p>
<p>The JSON below defines the parameters needed to execute a deployment via helm. </p>
<p>The JSON is described in more detail on a page dedicated to <code>metadata.json</code>, so will only be described high level here.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">{</span><span class="w">    </span>
<span class="w">    </span><span class="nt">&quot;helm_params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;repository_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://argoproj.github.io/argo-helm&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;repository_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;argo/argo-cd&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;helm_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4.2.1&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;set_key_values&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="s2">&quot;global.image.tag={{imageTag}}&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;installCRDs=false&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;configs.secret.argocdServerAdminPassword=&#39;{{argoCdAdminPassword}}&#39;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;controller.clusterAdminAccess.enabled=true&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;server.clusterAdminAccess.enabled=true&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;server.extraArgs[0]=--insecure&quot;</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="autosetuppreinstallsteps">autoSetupPreInstallSteps()<a class="headerlink" href="#autosetuppreinstallsteps" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/autoSetupPreInstallSteps.sh" target="_blank">auto-setup/functions/autoSetupPreInstallSteps.sh</a></p>
<p>Executes all the pre-install scripts as defined in <code>metadata.json</code> and located in the <code>pre_install_scripts</code> folder of the component in question.</p>
<h3 id="autosetupscriptinstall">autoSetupScriptInstall()<a class="headerlink" href="#autosetupscriptinstall" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/autoSetupScriptInstall.sh" target="_blank">auto-setup/functions/autoSetupScriptInstall.sh</a></p>
<p>Executes all the main installation scripts as defined in <code>metadata.json</code> and located in the root folder of the component in question.
These scripts run after the pre and before the post installation scripts.</p>
<h3 id="createdesktopicon">createDesktopIcon()<a class="headerlink" href="#createdesktopicon" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/desktopIconCreate.sh" target="_blank">auto-setup/functions/desktopIconCreate.sh</a></p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>createDesktopIcon "&lt;shortcutsDirectory&gt;" "&lt;primaryUrl&gt;" "&lt;shortcutText&gt;" "&lt;iconPath&gt;" "&lt;browserOptions&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Install the desktop shortcut for KX.AS.CODE Portal</span>
<span class="nv">shortcutsDirectory</span><span class="o">=</span><span class="s2">&quot;/home/</span><span class="si">${</span><span class="nv">vmUser</span><span class="si">}</span><span class="s2">/Desktop&quot;</span>
<span class="nv">primaryUrl</span><span class="o">=</span><span class="s2">&quot;http://localhost:3000&quot;</span>
<span class="nv">shortcutText</span><span class="o">=</span><span class="s2">&quot;KX.AS.CODE Portal&quot;</span>
<span class="nv">iconPath</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">installComponentDirectory</span><span class="si">}</span><span class="s2">/</span><span class="k">$(</span>cat<span class="w"> </span><span class="si">${</span><span class="nv">componentMetadataJson</span><span class="si">}</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>-r<span class="w"> </span><span class="s1">&#39;.shortcut_icon&#39;</span><span class="k">)</span><span class="s2">&quot;</span>
<span class="nv">browserOptions</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
createDesktopIcon<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">shortcutsDirectory</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">primaryUrl</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">shortcutText</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">iconPath</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">browserOptions</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="checkrunningkubernetespods">checkRunningKubernetesPods()<a class="headerlink" href="#checkrunningkubernetespods" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/kubernetesCheckRunningPods.sh" target="_blank">auto-setup/functions/kubernetesCheckRunningPods.sh</a></p>
<p>This checks that the number of deployed pods equals the number of running pods for a given component installation. This is just a pre-check before proceeding onto the URL health checks.</p>
<h3 id="createkubernetesnamespace">createKubernetesNamespace()<a class="headerlink" href="#createkubernetesnamespace" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/kubernetesCreateNamespace.sh" target="_blank">auto-setup/functions/kubernetesCreateNamespace.sh</a></p>
<div class="admonition info">
<p class="admonition-title">There are no inputs to this function, as all the needed data comes from the component's <code>metadata.json</code>.</p>
</div>
<h3 id="deployyamlfilestokubernetes">deployYamlFilesToKubernetes()<a class="headerlink" href="#deployyamlfilestokubernetes" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/kubernetesDeployYamlFiles.sh" target="_blank">auto-setup/functions/kubernetesDeployYamlFiles.sh</a></p>
<p>Deploys all Kubernetes YAML files in the component's optional <code>deployment_yaml</code> directory.</p>
<p><code>${installComponentDirectory}/deployment_yaml/*.yaml</code></p>
<p>It also replaces all the <code>{{ mustache }}</code> placeholders in those YAML files with the values in global and component specific environment variables.</p>
<p>Finally, a validation check is done with <a href="https://kubeval.instrumenta.dev/" target="_blank">kubeval</a> to ensure the YAML file is valid before applying it. The function will exit with <code>RC=1</code> if a YAML file is found not to be valid.</p>
<h2 id="argocd">ArgoCD<a class="headerlink" href="#argocd" title="Permanent link">#</a></h2>
<h3 id="argocdlogin">argoCdLogin()<a class="headerlink" href="#argocdlogin" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/argoCdLogin.sh" target="_blank">auto-setup/functions/argoCdLogin.sh</a></p>
<p>Logs into ArgoCD before performing any ArgoCD specific actions.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This function probably still works, but needs adjusting to take into account the new credential management process. </p>
</div>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>argoCdLogin</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>argoCdLogin
</code></pre></div></td></tr></table></div>
</div>
<h2 id="core-setup">Core Setup<a class="headerlink" href="#core-setup" title="Permanent link">#</a></h2>
<p>These functions are called when KX.AS.CODE are first setup. They should not be needed in any of the auto-setup scripts that deploy applications on top of the base KX.AS.CODE setup. They were created to increase the readability of the code, not necessarily because the present blocks of code that will be needed repeatedly.</p>
<h3 id="applycustomizations">applyCustomizations()<a class="headerlink" href="#applycustomizations" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/applyCustomizations.sh" target="_blank">auto-setup/functions/applyCustomizations.sh</a></p>
<p>Applies all the visual customization images that were copied into the VM when KX.AS.CODE first started, and applies the customizations where required.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>applyCustomizations</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>applyCustomizations
</code></pre></div></td></tr></table></div>
</div>
<h3 id="autosetupexecutetask">autoSetupExecuteTask()<a class="headerlink" href="#autosetupexecutetask" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/autoSetupExecuteTask.sh" target="_blank">auto-setup/functions/autoSetupExecuteTask.sh</a></p>
<p>Executes task triggered via KX-Portal. The available tasks for a component are defined in the component's metadata.json file.
Here an example JSON.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;available_tasks&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;restartFrontend&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Restart frontend&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Restart the frontend microservice&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;script&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;restartFrontend.sh&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;develop&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;mandatory&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>See also the following <a href="../../Overview/Task-Executions/">page</a> for more details.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>autoSetupExecuteTask "&lt;taskToExecute&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Executes task triggered via KX-Portal</span>
autoSetupExecuteTask<span class="w"> </span><span class="s2">&quot;restartFrontend&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="customizeimage">customizeImage()<a class="headerlink" href="#customizeimage" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/customizeImage.sh" target="_blank">auto-setup/functions/customizeImage.sh</a></p>
<p>Checks the validity of the image to be customized before applying it</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>customizeImage "&lt;image function&gt;" "&lt;image target location&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Apply custom desktop background</span>
customizeImage<span class="w"> </span><span class="s2">&quot;background&quot;</span><span class="w"> </span><span class="s2">&quot;/usr/share/backgrounds/background.jpg&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="getcustomvariables">getCustomVariables()<a class="headerlink" href="#getcustomvariables" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/getCustomVariables.sh" target="_blank">auto-setup/functions/getCustomVariables.sh</a></p>
<p>Loads the custom environment variables defined in a profile's customVariables.json file. These can be defined in either the Jenkins based launcher, or simply by manually adding a customVariable.json file to the profile directory before launching KX.AS.CODE.
Here an example of the expected json:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;customVariables&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;branch&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;main&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;version&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.2.3&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Usage</p>
</div>
<p><code>getCustomVariables</code></p>
<h3 id="populateactionqueuesjson">populateActionQueuesJson()<a class="headerlink" href="#populateactionqueuesjson" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/actionQueuesPopulateJson.sh" target="_blank">auto-setup/functions/actionQueuesPopulateJson.sh</a></p>
<p>Creates a single <code>actionQueues.json</code> from all the group JSON templates and the core <code>acttionQueues.json</code>.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>populateActionQueuesJson</code></p>
</div>
<h3 id="populateactionqueuesrabbitmq">populateActionQueuesRabbitMq()<a class="headerlink" href="#populateactionqueuesrabbitmq" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/actionQueuesPopulateRabbitMq.sh" target="_blank">auto-setup/functions/actionQueuesPopulateRabbitMq.sh</a></p>
<p>This function picks up the <code>actionQueues.json</code> and adds them to the RabbitMQ pending queue for processing.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>populateActionQueuesRabbitMq</code></p>
</div>
<h3 id="checkandupdatebasepassword">checkAndUpdateBasePassword()<a class="headerlink" href="#checkandupdatebasepassword" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/checkAndUpdateBasePassword.sh" target="_blank">auto-setup/functions/checkAndUpdateBasePassword.sh</a></p>
<p>The default password is normally <code>L3arnandshare</code>. If this has been changed in the auto-setup.json (manually or via the configuration), then this function will change that to the target base password.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>checkAndUpdateBasePassword</code></p>
</div>
<h3 id="checkandupdatebaseusername">checkAndUpdateBaseUsername()<a class="headerlink" href="#checkandupdatebaseusername" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/checkAndUpdateBaseUsername.sh" target="_blank">auto-setup/functions/checkAndUpdateBaseUsername.sh</a></p>
<p>The default username is normally <code>kx.hero</code>. If this has been changed in the auto-setup.json (manually or via the configuration), then this function will create a new user with the target base username.
The old username <code>kx.hero</code> will still be in the system, but not displayed at the login screen.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>checkAndUpdateBaseUsername</code></p>
</div>
<h3 id="checkglusterfsserviceinstalled">checkGlusterFsServiceInstalled()<a class="headerlink" href="#checkglusterfsserviceinstalled" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/checkGlusterFsServiceInstalled.sh" target="_blank">auto-setup/functions/checkGlusterFsServiceInstalled.sh</a></p>
<p>Calling this function will check if a standalone KX.AS.CODE has been started. If so, it will automatically change any Kubernetes deployment files to use the <code>local-storage</code> storageClass, install of the <code>gluster-heketi</code> one.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>checkGlusterFsServiceInstalled</code></p>
</div>
<h3 id="configurebinddns">configureBindDns()<a class="headerlink" href="#configurebinddns" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/configureBindDnsServer.sh" target="_blank">auto-setup/functions/configureBindDnsServer.sh</a></p>
<p>Sets up the domain names for base services and KX.AS.CODE administration tools, so that these can be called via their domain name, instead of <code>localhost:&lt;port&gt;</code>. 
Initial sub-domains setup by this function are:</p>
<table>
<thead>
<tr>
<th>Domain Name</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>pgadmin</td>
<td>Starts PGAdmin. Postgres is primarily used for the Guacamole setup. May be useful for debugging.</td>
</tr>
<tr>
<td>kx-main1</td>
<td>The IP address of the main node. The first main node is the overall controller.</td>
</tr>
<tr>
<td>ldap</td>
<td>For accessing openldap, which is used as the basis for SSO.</td>
</tr>
<tr>
<td>ldapadmin</td>
<td>Domain for the LDAP account manager -&gt; <a href="https://sourceforge.net/projects/lam/">https://sourceforge.net/projects/lam/</a></td>
</tr>
<tr>
<td>rabbitmq</td>
<td>Domain for RabbitMQ Mgmt UI -&gt; <a href="https://www.cloudamqp.com/blog/part3-rabbitmq-for-beginners_the-management-interface.html">https://www.cloudamqp.com/blog/part3-rabbitmq-for-beginners_the-management-interface.html</a></td>
</tr>
<tr>
<td>remote-desktop</td>
<td>Domain for the Guacamole Remote Desktop -&gt; <a href="https://guacamole.apache.org/">https://guacamole.apache.org/</a></td>
</tr>
<tr>
<td>api-internal</td>
<td>For accessing the Kubernetes API endpoints</td>
</tr>
<tr>
<td>*</td>
<td>For directing all Kubernetes deployed applications to the Kubernetes NGINX Ingress Controller</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>configureBindDns</code></p>
</div>
<h3 id="configurekeyboardsettings">configureKeyboardSettings()<a class="headerlink" href="#configurekeyboardsettings" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/configureKeyboard.sh" target="_blank">auto-setup/functions/configureKeyboard.sh</a></p>
<p>Configures the default keyboard for the user.
Currently the installed languages are:</p>
<table>
<thead>
<tr>
<th>Language</th>
<th>Code</th>
</tr>
</thead>
<tbody>
<tr>
<td>English (USA)</td>
<td>us</td>
</tr>
<tr>
<td>de</td>
<td>German</td>
</tr>
<tr>
<td>gb</td>
<td>English (British)</td>
</tr>
<tr>
<td>fr</td>
<td>French</td>
</tr>
<tr>
<td>it</td>
<td>Italian</td>
</tr>
<tr>
<td>es</td>
<td>Spanish</td>
</tr>
</tbody>
</table>
<p>The languages can be customized after initial KX.AS.CODE setup, using either standard Linux CLI commands or using the desktop control panel.
If there is enough demand for another language to be added to the base setup, we can do that in future. Currently in the BETA we have a small set of languages for debugging and testing.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>configureKeyboardSettings</code></p>
</div>
<h3 id="configurenetwork">configureNetwork()<a class="headerlink" href="#configurenetwork" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/configureNetwork.sh" target="_blank">auto-setup/functions/configureNetwork.sh</a></p>
<p>Configures the network of the main or node VMs when they come up. If <code>fixed</code> IP addresses have been set in the <code>profile-config.json</code>, these will be configured in the virtual NICs. If not, an IP address will be retrieved via DHCP.
For DNS there are 2 options. <code>hybrid</code> and <code>fixed</code>. Hybrid will configure the NICs with both the dynamically retrieved DNS servers, as well as the local BIND DNS.
Fixed will set the DNS servers configured in <code>profile-config.json</code> only.</p>
<div class="admonition danger">
<p class="admonition-title">Important</p>
<p>Important, in the case of a fixed DNS setting, ensure that the first one points to the IP of KX-Main1.</p>
</div>
<p>The KX.AS.CODE virtualization profiles are currently setup as follows:</p>
<table>
<thead>
<tr>
<th>Virtualization</th>
<th>IP Address</th>
<th>DNS</th>
</tr>
</thead>
<tbody>
<tr>
<td>AWS</td>
<td>Single NIC with dynamic IP address</td>
<td>Hybrid</td>
</tr>
<tr>
<td>OpenStack</td>
<td>Single NIC with dynamic IP address</td>
<td>Hybrid</td>
</tr>
<tr>
<td>Parallels</td>
<td>Single NIC with dynamic IP address</td>
<td>Hybrid</td>
</tr>
<tr>
<td>VirtualBox</td>
<td>Two NICs with fixes IP addresses. First is a NAT interface with default VirtualBox IP <code>10.0.2.15</code>. The second IP used a custom "kxascode" network with IP <code>10.100.76.x</code>, unless changes, likely to be <code>10.100.76.200</code>. Kubernetes is configured to listen to the second NIC, otherwise the hosts will not be able to talk to each other.</td>
<td>Fixed</td>
</tr>
<tr>
<td>VMWare</td>
<td>Single NIC with dynamic IP address</td>
<td>Hybrid</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>configureNetwork</code></p>
</div>
<h3 id="createexternalaccessdirectory">createExternalAccessDirectory()<a class="headerlink" href="#createexternalaccessdirectory" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/createExternalAccessDirectory.sh" target="_blank">auto-setup/functions/createExternalAccessDirectory.sh</a></p>
<p>Creates directory <code>/vagrant/kx-external-access</code> (if local virtualization is in use) or <code>/kx-external-access</code> if private or public cloud. This directory will eventually contain the hosts file and the KX.AS.CODE certificates, which can be used to access the deployed applications outside of the VM.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>createExternalAccessDirectory</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>createExternalAccessDirectory
</code></pre></div></td></tr></table></div>
</div>
<h3 id="disablelinuxdesktop">disableLinuxDesktop()<a class="headerlink" href="#disablelinuxdesktop" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/disableLinuxDesktop.sh" target="_blank">auto-setup/functions/disableLinuxDesktop.sh</a></p>
<p>If disableLinuxDesktop was set to true in <code>profile-config.json</code>, this will disable the desktop during the initial KX.AS.CODE setup on first start abd reboot into the CLI. </p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>A script is dropped into <code>usr/share/kx.as.code/workspace</code> for re-enabling the desktop. Alternatively, it is also possible enter <code>startx</code> at the command line, to temporarily enable the desktop, but keep the default configuration.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>disableLinuxDesktop</code></p>
</div>
<h3 id="getcomponentinstallationproperties">getComponentInstallationProperties()<a class="headerlink" href="#getcomponentinstallationproperties" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/getComponentInstallationProperties.sh" target="_blank">auto-setup/functions/getComponentInstallationProperties.sh</a></p>
<p>Sets up the base parameters for the component in <code>auto-setup</code> being installed. All installation scripts should reference these standard variables, in order to ensure the solution continues functioning in future, if for example, there was a change to the base <code>auto-setup</code> directory structure. 
Variables exported as shell environment variables for use in scripts are the following:</p>
<table>
<thead>
<tr>
<th>Variable name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>installComponentDirectory</td>
<td>The full path to the components home folder being installed</td>
</tr>
<tr>
<td>componentMetadataJson</td>
<td>Complete JSON block from the components <code>metadata.json</code> file</td>
</tr>
<tr>
<td>namespace</td>
<td>Kubernetes namespace. Ignored if not defined in <code>metadata.json</code> for solution being installed</td>
</tr>
<tr>
<td>installationType</td>
<td>argocd, helm or script</td>
</tr>
<tr>
<td>applicationUrl</td>
<td>Used for health checks</td>
</tr>
<tr>
<td>applicationDomain</td>
<td>Application URL &amp; domain</td>
</tr>
</tbody>
</table>
<p>As well as the above, all environment variables defined in <code>metadata.json</code> are also exported for use as bash environment variables, or for replacing placeholders in configuration files using the mustasch syntax -&gt; <code>{{ variable_name}}</code></p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>getComponentInstallationProperties</code></p>
</div>
<h3 id="getglobalvariables">getGlobalVariables()<a class="headerlink" href="#getglobalvariables" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/getGlobalVariables.sh" target="_blank">auto-setup/functions/getGlobalVariables.sh</a></p>
<p>Exposes all global variables in <code>auto-setup/globalVariables.json</code>, so that they can be referenced  in scripts.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Currently the variables defined in <code>globalVariables.json</code> are the following:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">{</span>
<span class="nt">&quot;sharedKxHome&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/usr/share/kx.as.code&quot;</span><span class="p">,</span>
<span class="nt">&quot;installationWorkspace&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;${sharedKxHome}/workspace&quot;</span><span class="p">,</span>
<span class="nt">&quot;certificatesWorkspace&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;${installationWorkspace}/certificates&quot;</span><span class="p">,</span>
<span class="nt">&quot;actionWorkflows&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pending wip completed failed retry notification&quot;</span><span class="p">,</span>
<span class="nt">&quot;defaultDockerHubSecret&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;default/regcred&quot;</span><span class="p">,</span>
<span class="nt">&quot;sharedGitHome&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;${sharedKxHome}/git&quot;</span><span class="p">,</span>
<span class="nt">&quot;autoSetupHome&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;${sharedGitHome}/kx.as.code/auto-setup&quot;</span><span class="p">,</span>
<span class="nt">&quot;skelDirectory&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;${sharedKxHome}/skel&quot;</span><span class="p">,</span>
<span class="nt">&quot;vendorDocsDirectory&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;${sharedKxHome}/Vendor Docs&quot;</span><span class="p">,</span>
<span class="nt">&quot;apiDocsDirectory&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;${sharedKxHome}/API Docs&quot;</span><span class="p">,</span>
<span class="nt">&quot;shortcutsDirectory&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;${sharedKxHome}/Applications&quot;</span><span class="p">,</span>
<span class="nt">&quot;devopsShortcutsDirectory&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;${sharedKxHome}/Applications&quot;</span><span class="p">,</span>
<span class="nt">&quot;adminShortcutsDirectory&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;${sharedKxHome}/Admin Tools&quot;</span><span class="p">,</span>
<span class="nt">&quot;vmUser&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;kx.hero&quot;</span><span class="p">,</span>
<span class="nt">&quot;vmUserId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$(id -u ${vmUser})&quot;</span><span class="p">,</span>
<span class="nt">&quot;vmPassword&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$(cat ${sharedKxHome}/.config/.user.cred)&quot;</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
</div>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>getGlobalVariables</code></p>
</div>
<h3 id="getnetworkconfiguration">getNetworkConfiguration()<a class="headerlink" href="#getnetworkconfiguration" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/getNetworkConfiguration.sh" target="_blank">auto-setup/functions/getNetworkConfiguration.sh</a></p>
<p>Get the network interfaces installed on the system. In most cases there will be only one NIC defined, but in the case of VirtualBox, there are two.
This script ensures that subsequent scripts know which NICs to avoid listening on, eg, the VirtualBox NAT NIC with IP <code>10.0.2.15</code>.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p>``</p>
</div>
<h3 id="getprofileconfiguration">getProfileConfiguration()<a class="headerlink" href="#getprofileconfiguration" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/getProfileConfiguration.sh" target="_blank">auto-setup/functions/getProfileConfiguration.sh</a></p>
<details class="info">
<summary>Example profile-config.json file (click to expand)</summary>
<p>Here is an example profile-config.json file, which will be read and exported to environment variables.
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;allowWorkloadsOnMaster&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;false&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;baseDomain&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;kx-as-code.local&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;baseIpType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;static&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;basePassword&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;L3arnandshare&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;baseUser&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;kx.hero&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;certificationMode&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;defaultKeyboardLanguage&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;de&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;disableLinuxDesktop&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;false&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;disableSessionTimeout&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;dnsResolution&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;static&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;docker&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;dockerhub_email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;dockerhub_password&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;dockerhub_username&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;environmentPrefix&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;demo1&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;glusterFsDiskSize&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;local_volumes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;fifty_gb&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;five_gb&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;one_gb&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;ten_gb&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;thirty_gb&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;metalLbIpRange&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;ipRangeEnd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10.10.76.150&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;ipRangeStart&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10.10.76.100&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;proxy_settings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;http_proxy&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;https_proxy&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;no_proxy&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;selectedTemplates&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CICD Group 1&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;sslProvider&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;self-signed&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;standaloneMode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;true&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;startupMode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;normal&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;staticNetworkSetup&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;baseFixedIpAddresses&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;kx-main1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10.100.76.200&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;kx-main2&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10.100.76.201&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;kx-main3&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10.100.76.202&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;kx-worker1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10.100.76.203&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;kx-worker2&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10.100.76.204&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;kx-worker3&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10.100.76.205&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;kx-worker4&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10.100.76.206&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;dns1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10.100.76.200&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;dns2&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;8.8.8.8&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;gateway&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10.100.76.2&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;virtualizationType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;local&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;vm_properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;3d_acceleration&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;off&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;main_admin_node_cpu_cores&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;main_admin_node_memory&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8192</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;main_node_count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;main_replica_node_cpu_cores&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;main_replica_node_memory&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8192</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;worker_node_count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;worker_node_cpu_cores&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;worker_node_memory&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8192</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
</details>
<p>The above JSON fields are exported to the following variables:</p>
<table>
<thead>
<tr>
<th>Variable name</th>
<th>Variable Group</th>
<th>Description</th>
<th>Possible Values</th>
</tr>
</thead>
<tbody>
<tr>
<td>virtualizationType</td>
<td>General</td>
<td>The type of virtualization. Setting a cloud for example, will affect how Grub is setup.</td>
<td><code>private_cloud</code>, <code>public_cloud</code>, <code>local_virtualization</code></td>
</tr>
<tr>
<td>standaloneMode</td>
<td>Base Setup</td>
<td>This will ensure that some configuration changes are applied when installing components in auto-setup. For example, glusterfs is not installed, and components requiring glusterfs are automatically changed to use local-storage instead.</td>
<td><code>true</code> or <code>false</code></td>
</tr>
<tr>
<td>baseIpType</td>
<td>Network Setup</td>
<td>For most virtualization profiles this is set to <code>dynamic</code>. Only VirtualBox is <code>static</code>.</td>
<td><code>static</code> or <code>dynamic</code></td>
</tr>
<tr>
<td>dnsResolution</td>
<td>Network Setup</td>
<td>Must be set to <code>fixed</code> if baseIpType is set to <code>static</code>. Set to <code>hybrid</code> if <code>baseIpType</code> is set to <code>dynamic</code>. This will append the local BindDNS instance IP to <code>resolv.conf</code>, to the DNS servers retrieved from DHCP</td>
<td><code>fixed</code> or <code>hybrid</code></td>
</tr>
<tr>
<td>mainIpAddress</td>
<td>Network Setup</td>
<td>This is set dynamically by querying the local system, or if the IP type was set to fixed, by extracting the IP for <code>kx-main1</code> from <code>profile-config.json</code></td>
<td><code>&lt;kx-main1's IP address&gt;</code></td>
</tr>
<tr>
<td>fixedNicConfigGateway</td>
<td>Network Setup</td>
<td>Only read if the <code>baseIpType</code> is set to <code>static</code>. This will set the NIC's gateway, when applying the static IP configuration defined in <code>profile-config.json</code></td>
<td><code>&lt;kx-main1's IP gateway address&gt;</code></td>
</tr>
<tr>
<td>fixedNicConfigDns1</td>
<td>Network Setup</td>
<td>Only read if the <code>baseIpType</code> is set to <code>static</code>. This will set the NIC's DNS1 resolver (should be set to <code>kx-main1</code>'s IP address), when applying the static IP configuration defined in <code>profile-config.json</code></td>
<td><code>&lt;kx-main1's IP address&gt;</code></td>
</tr>
<tr>
<td>fixedNicConfigDns2</td>
<td>Network Setup</td>
<td>Only read if the <code>baseIpType</code> is set to <code>static</code>. This will set the NIC's DNS2 resolver (can be anything, such as <code>8.8.8.8</code>, when applying the static IP configuration defined in <code>profile-config.json</code></td>
<td></td>
</tr>
<tr>
<td>environmentPrefix</td>
<td>Base FQDN</td>
<td>This will be prepended to the <code>baseDomain</code> to create the KX.AS.CODE environment's FQDN. This is useful when deploying several KX.AS.CODE installations</td>
<td></td>
</tr>
<tr>
<td>baseDomain</td>
<td>Base FQDN</td>
<td>This will be appended to the <code>environmentPrefix</code> to create the KX.AS.CODE environment's FQDN. This is useful when deploying several KX.AS.CODE installations</td>
<td></td>
</tr>
<tr>
<td>baseDomainWithHyphens</td>
<td>Base FQDN</td>
<td>Used in some component configurations, where periods break the components installation process</td>
<td><i>automatically generated</i></td>
</tr>
<tr>
<td>numKxMainNodes</td>
<td>Base Setup</td>
<td>Used for some core processing where the number of nodes is relevant to the operations</td>
<td></td>
</tr>
<tr>
<td>defaultKeyboardLanguage</td>
<td>Base Setup</td>
<td>The default language for the VM.</td>
<td><code>us</code>,<code>de</code>,<code>gb</code>,<code>fr</code>,<code>it</code>,<code>es</code></td>
</tr>
<tr>
<td>baseUser</td>
<td>Base Setup</td>
<td>The base user</td>
<td>default is <code>kx.hero</code> if not changed</td>
</tr>
<tr>
<td>basePassword</td>
<td>Base Setup</td>
<td>The password for the base user</td>
<td>default is <code>Learnandshare</code> if not changed</td>
</tr>
<tr>
<td>baseIpRangeStart</td>
<td><i>currently not used</i></td>
<td><i>currently not used</i></td>
<td></td>
</tr>
<tr>
<td>baseIpRangeEnd</td>
<td><i>currently not used</i></td>
<td><i>currently not used</i></td>
<td></td>
</tr>
<tr>
<td>metalLbIpRangeStart</td>
<td>Load Balancing</td>
<td>Sets the start of the IP range dynamically allocated by the Kubernetes MetalLB controller</td>
<td></td>
</tr>
<tr>
<td>metalLbIpRangeEnd</td>
<td>Load Balancing</td>
<td>Sets the end od the IP range dynamically allocated by the Kubernetes MetalLB controller</td>
<td></td>
</tr>
<tr>
<td>sslProvider</td>
<td>SSL</td>
<td></td>
<td><code>self-signed</code> or <code>letsencrypt</code></td>
</tr>
<tr>
<td>sslDomainAdminEmail</td>
<td>SSL</td>
<td>Sets the LetsEncrypt admin email for receiving expiration notifications etc. Only needed when LetsEncrypt is enabled (<code>sslProvider=letsencryt</code>)</td>
<td><code>&lt;valid email address&gt;</code></td>
</tr>
<tr>
<td>letsEncryptEnvironment</td>
<td>SSL</td>
<td>This is used when installing the cert-manager into Kubernetes, to determine which LetsEncrypt provider to use. Only needed when LetsEncrypt is enabled (<code>sslProvider=letsencryt</code>)</td>
<td><code>prod</code> or <code>staging</code></td>
</tr>
<tr>
<td>httpProxySetting</td>
<td>HTTP Proxy</td>
<td>HTTPS URL to proxy. KX.AS.CODE works best without a proxy.</td>
<td><code>&lt;hostname&gt;:&lt;port&gt;</code></td>
</tr>
<tr>
<td>httpsProxySetting</td>
<td>HTTP Proxy</td>
<td>HTTP URL to proxy KX.AS.CODE works best without a proxy.</td>
<td><code>&lt;hostname&gt;:&lt;port&gt;</code></td>
</tr>
<tr>
<td>noProxySetting</td>
<td>HTTP Proxy</td>
<td>IP addresses or ranges that should not be accessed via the proxy</td>
<td>IP ranges/addresses separated by a commma</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>getProfileConfiguration</code></p>
</div>
<h3 id="getversions">getVersions()<a class="headerlink" href="#getversions" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/getVersions.sh" target="_blank">auto-setup/functions/getVersions.sh</a></p>
<p>The Kubernetes and KX.AS.CODE versions are exported to <code>kxVersion</code> and <code>kubeVersion</code> environment variables.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>getVersions</code></p>
</div>
<h3 id="gnupginitializeuser">gnupgInitializeUser()<a class="headerlink" href="#gnupginitializeuser" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/gnupgInitializeUser.sh" target="_blank">auto-setup/functions/gnupgInitializeUser.sh</a></p>
<p><a href="https://www.gnupg.org/" target="_blank">gnupg</a> is initialized for the GoPass setup later on.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>gnupgInitializeUser</code></p>
</div>
<h3 id="installenvhandlebars">installEnvhandlebars()<a class="headerlink" href="#installenvhandlebars" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/installEnvhandlebars.sh" target="_blank">auto-setup/functions/installEnvhandlebars.sh</a></p>
<p>In some cases, <a href="https://mustache.github.io/" target="_blank">mo</a> is used for replacing <code>{{ mustache }}</code> placeholders in templates. However, when there needs to be more advanced processing, eg. for escaping a curl bracket, the node <a href="https://www.npmjs.com/package/envhandlebars" target="_blank">envhandlebars</a> utility is used instead.
This function installs <code>envhandlebars</code>.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>installEnvhandlebars</code></p>
</div>
<h3 id="executepostinstallscripts">executePostInstallScripts()<a class="headerlink" href="#executepostinstallscripts" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/postInstallExecuteScripts.sh" target="_blank">auto-setup/functions/postInstallExecuteScripts.sh</a></p>
<p>Executes a component's post installation scripts.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>executePostInstallScripts</code></p>
</div>
<h3 id="postinstallstepletsencrypt">postInstallStepLetsEncrypt()<a class="headerlink" href="#postinstallstepletsencrypt" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/postInstalllStepLetsEncrypt.sh" target="_blank">auto-setup/functions/postInstalllStepLetsEncrypt.sh</a></p>
<p>Updates a component's <a href="https://kubernetes.io/docs/concepts/services-networking/ingress/" target="_blank">ingress</a> resource, to use the LetsEncrypt SSL provider, if the variable <code>sslProvider</code> is set to <code>letsencrypt</code>.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>executePostInstallScripts</code></p>
</div>
<h3 id="setlogfilename">setLogFilename()<a class="headerlink" href="#setlogfilename" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/setLogFilename.sh" target="_blank">auto-setup/functions/setLogFilename.sh</a></p>
<p>Sets an individual log file name for each component installation.</p>
<p><code>${installationWorkspace}/${componentName}_${logTimestamp}.${retries}.log</code></p>
<p>If a component installation is not in progress, the generic logfile name is used:
<code>${installationWorkspace}/kx.as.code_autoSetup.log</code></p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>setLogFilename</code></p>
</div>
<h3 id="updatehostfileforexternaluse">updateHostFileForExternalUse()<a class="headerlink" href="#updatehostfileforexternaluse" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/updateHostFileForExternalUse.sh" target="_blank">auto-setup/functions/updateHostFileForExternalUse.sh</a></p>
<p>This function is automatically run with every application install. It makes all configured Kubernetes ingress endpoints available in the kx-external-access directory. See also the function <code>createExternalAccessDirectory()</code>.    </p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p>updateHostFileForExternalUse
``</p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>updateHostFileForExternalUse
</code></pre></div></td></tr></table></div>
</div>
<h3 id="updatekxsourceonfirststart">updateKxSourceOnFirstStart()<a class="headerlink" href="#updatekxsourceonfirststart" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/updateKxSourceOnFirstStart.sh" target="_blank">auto-setup/functions/updateKxSourceOnFirstStart.sh</a></p>
<p>Dependent on a flag set in profile-config.json, the KX.AS.CODE source will be uppdated from Git on first start, to ensure any critical fixes are pulled since the last official release. This saves needing to rebuild the entire image with every minor release, and also ensures the user does not need to upgrade their KX.AS.CODE machine for a minor fix.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>updateKxSourceOnFirstStart</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>updateKxSourceOnFirstStart
</code></pre></div></td></tr></table></div>
</div>
<h3 id="updatestorageclassifneeded">updateStorageClassIfNeeded()<a class="headerlink" href="#updatestorageclassifneeded" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/updateStorageClassIfNeeded.sh" target="_blank">auto-setup/functions/updateStorageClassIfNeeded.sh</a></p>
<p>Detects if <code>glusterfs</code> is installed or not. If not, this function automatically updates the <code>helm</code> and <code>Kubernetes</code> configuration files for the component to use the <code>local-storage</code> <a href="https://kubernetes.io/docs/concepts/storage/storage-classes/" target="_blank">storageClass</a> instead of <code>gluster-heketi</code>.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>updateStorageClassIfNeeded</code></p>
</div>
<h3 id="waitformessageonactionqueue">waitForMessageOnActionQueue()<a class="headerlink" href="#waitformessageonactionqueue" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/waitForMessageOnActionQueue.sh" target="_blank">auto-setup/functions/waitForMessageOnActionQueue.sh</a></p>
<p>Waits for the message to actually be available on the target RabbitMQ queue, before proceeding with the next step.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>waitForMessageOnActionQueue &lt;queue_name&gt; &lt;application&gt;</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>waitForMessageOnActionQueue<span class="w"> </span><span class="s2">&quot;retry_queue&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">componentName</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h2 id="credential-management">Credential Management<a class="headerlink" href="#credential-management" title="Permanent link">#</a></h2>
<h3 id="deletepassword">deletePassword()<a class="headerlink" href="#deletepassword" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/passwordDelete.sh" target="_blank">auto-setup/functions/passwordDelete.sh</a></p>
<p>Deletes a password from GoPass.</p>
<p>The password group is only needed if the password was created with a password group. In GoPass, the password group is shown as a folder under the domain name.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>deletePassword "&lt;pasword name in GoPass&gt;" "&lt;password group&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>deletePassword<span class="w"> </span><span class="s2">&quot;gitlab-root-user&quot;</span><span class="w"> </span>gitlab<span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="generateapikey">generateApiKey()<a class="headerlink" href="#generateapikey" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/apiKeyGenerate.sh" target="_blank">auto-setup/functions/apiKeyGenerate.sh</a></p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Best just to use <code>apiKeyManage</code>, which does all the get, generate and push in one go, with validation checks etc</p>
</div>
<p>Generates a 32 character string that is API compatible. eg. no special characters - just alpha-numeric characters.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>apiKeyGenerate</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">apiKey</span><span class="o">=</span><span class="k">$(</span>apiKeyGenerate<span class="k">)</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="managedapikey">managedApiKey()<a class="headerlink" href="#managedapikey" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/apiKeyManage.sh" target="_blank">auto-setup/functions/apiKeyManage.sh</a></p>
<p>This generates a key using the <code>apiKeyGenerate</code> function if it does not already exist in <a href="https://github.com/gopasspw/gopass" target="_blank">GoPass</a>, and then pushes it go <a href="https://github.com/gopasspw/gopass" target="_blank">GoPass</a> with <code>passwordPush</code>.
Saves the developer the hassle of making several calls and writing their own validations.
This checks if the api key is already in GoPass, and creates it if not, subsequently returning it. If it already exists, the API key is retrieved from GoPass and again, returned.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>apiKeyManage "&lt;name of api key&gt;" "&lt;password group&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">apiKey</span><span class="o">=</span><span class="k">$(</span>managedApiKey<span class="w"> </span><span class="s2">&quot;gitlab-api-key&quot;</span><span class="w"> </span><span class="s2">&quot;gitlab&quot;</span><span class="k">)</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="generatepassword">generatePassword()<a class="headerlink" href="#generatepassword" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/passwordGenerate.sh" target="_blank">auto-setup/functions/passwordGenerate.sh</a></p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Best just to use <code>passwordManage</code>, which does all the get, generate and push in one go, with validation checks etc</p>
</div>
<p>Generates a 32 character string with special characters. Mostly used to create a secure password for admin users created during the component <code>auto-setup</code> installations.
To keep issues to a minimum with special characters, only the following special characters are included.
<code>{A..Z} {a..z} {0..9} {0..9} '# % * _ + - .</code></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Ensure that the password variable is quoted in the configuration files! This can easily break the installation if there is a character that bash does not handle correctly if not quotes. Also, be careful when using this to generate passwords for databases. For API keys, you should use <code>apiKeyGenerate</code> instead.</p>
</div>
<h3 id="getpassword">getPassword()<a class="headerlink" href="#getpassword" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/passwordGet.sh" target="_blank">auto-setup/functions/passwordGet.sh</a></p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Best just to use <code>passwordManage</code>, which does all the get, generate and push in one go, with validation checks etc</p>
</div>
<p>Gets the password as stored in GoPass by passing the name of the password generated previously.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>passwordGet "&lt;name of password&gt;" "&lt;password group&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">password</span><span class="o">=</span><span class="k">$(</span>passwordGet<span class="w"> </span><span class="s2">&quot;gitlab-root-password&quot;</span><span class="w"> </span><span class="s2">&quot;gitlab&quot;</span><span class="k">)</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="managedpassword">managedPassword()<a class="headerlink" href="#managedpassword" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/passwordManage.sh" target="_blank">auto-setup/functions/passwordManage.sh</a></p>
<p>Saves the developer the hassle of making several calls and writing their own validations.
This checks if the password is already in GoPass, and creates it if not, subsequently returning it. If it already exists, the password is retrieved from GoPass and again, returned.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>passwordManage "&lt;name of password&gt;" "&lt;password group&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">password</span><span class="o">=</span><span class="k">$(</span>passwordManage<span class="w"> </span><span class="s2">&quot;gitlab-root-password&quot;</span><span class="w"> </span><span class="s2">&quot;gitlab&quot;</span><span class="k">)</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="pushpassword">pushPassword()<a class="headerlink" href="#pushpassword" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/passwordPush.sh" target="_blank">auto-setup/functions/passwordPush.sh</a></p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Best just to use <code>passwordManage</code>, which does all the get, generate and push in one go, with validation checks etc</p>
</div>
<p>Pushes the password to GoPass.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>passwordPush "&lt;name of password&gt;" "&lt;password&gt;" "&lt;password group&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nv">password</span><span class="o">=</span><span class="k">$(</span>generatePassword<span class="k">)</span><span class="o">)</span>
passwordPush<span class="w"> </span><span class="s2">&quot;gitlab-root-password&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">password</span><span class="si">}</span><span class="s2"> &quot;</span>gitlab<span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="renewapikey">renewApiKey()<a class="headerlink" href="#renewapikey" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/apiKeyRenew.sh" target="_blank">auto-setup/functions/apiKeyRenew.sh</a></p>
<p>Renews the specified API key.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>renewApiKey "&lt;pasword name&gt;" "&lt;password group&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>renewApiKey<span class="w"> </span><span class="s2">&quot;gitlab-personal-access-token&quot;</span><span class="w"> </span><span class="s2">&quot;gitlab&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h2 id="docker-registry">Docker Registry<a class="headerlink" href="#docker-registry" title="Permanent link">#</a></h2>
<p>The functions here are for managing the standard <a href="https://hub.docker.com/_/registry" target="_blank">docker registry</a> installed as part of the <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/core/docker-registry" target="_blank">core setup</a>.</p>
<h3 id="dockerregistryadduser">dockerRegistryAddUser()<a class="headerlink" href="#dockerregistryadduser" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/dockerCoreRegistryAddUser.sh" target="_blank">auto-setup/functions/dockerCoreRegistryAddUser.sh</a></p>
<p>Creates or updates the Kubernetes secret containing the <code>htpasswd</code> file containing username and passwords, in the Docker Registry namespace, and remounts into the docker-registry pod, subsequently redeploying the POD with a rolling update.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>dockerRegistryAddUser "&lt;username&gt;"</code></p>
</div>
<h3 id="dockercoreregistrychecktagexists">dockerCoreRegistryCheckTagExists()<a class="headerlink" href="#dockercoreregistrychecktagexists" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/dockerCoreRegistryCheckTagExists.sh" target="_blank">auto-setup/functions/dockerCoreRegistryCheckTagExists.sh</a></p>
<p>Creates or updates the Kubernetes secret containing the <code>htpasswd</code> file containing username and passwords, in the Docker Registry namespace, and remounts into the docker-registry pod, subsequently redeploying the POD with a rolling update.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
</div>
<p><code>dockerCoreRegistryCheckTagExists "&lt;imagePath&gt;"</code></p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>dockerCoreRegistryCheckTagExists<span class="w"> </span><span class="s2">&quot;devops/docker:</span><span class="si">${</span><span class="nv">gitlabDindImageVersion</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="createk8scredentialsecretforcoreregistry">createK8sCredentialSecretForCoreRegistry()<a class="headerlink" href="#createk8scredentialsecretforcoreregistry" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/dockerCoreRegistryK8sCredential.sh" target="_blank">auto-setup/functions/dockerCoreRegistryK8sCredential.sh</a></p>
<p>Creates the regCred secret needed by other deployments for pulling images from the private core docker registry.
The secret is created in the Kubernetes namespace of the current solution being installed.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>createK8sCredentialSecretForCoreRegistry</code></p>
</div>
<h3 id="logintocoreregistry">loginToCoreRegistry()<a class="headerlink" href="#logintocoreregistry" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/dockerCoreRegistryLogin.sh" target="_blank">auto-setup/functions/dockerCoreRegistryLogin.sh</a></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>This is usually carried out by the other docker-registry functions, and rarely needs to be called directly.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>loginToCoreRegistry</code></p>
</div>
<p>Logs into the KX.AS.CODE docker registry. Needed before executing any other actions against the registry.</p>
<h3 id="pushdockerimagetocoreregistry">pushDockerImageToCoreRegistry()<a class="headerlink" href="#pushdockerimagetocoreregistry" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/dockerCoreRegistryPush.sh" target="_blank">auto-setup/functions/dockerCoreRegistryPush.sh</a></p>
<p>Pushes a built image to the KX.AS.CODE core docker registry.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>pushDockerImageToCoreRegistry "&lt;docker image path&gt;:&lt;tag&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>docker<span class="w"> </span>build<span class="w"> </span>-f<span class="w"> </span><span class="si">${</span><span class="nv">installationWorkspace</span><span class="si">}</span>/Dockerfile.Docker-Dind<span class="w"> </span>-t<span class="w"> </span>docker-registry.<span class="si">${</span><span class="nv">baseDomain</span><span class="si">}</span>/devops/docker:<span class="si">${</span><span class="nv">gitlabDindImageVersion</span><span class="si">}</span><span class="w"> </span>.
pushDockerImageToCoreRegistry<span class="w"> </span><span class="s2">&quot;devops/docker:</span><span class="si">${</span><span class="nv">gitlabDindImageVersion</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h2 id="general-helpers">General Helpers<a class="headerlink" href="#general-helpers" title="Permanent link">#</a></h2>
<h3 id="addkxcertssecrettonamespace">addKxCertsSecretToNamespace()<a class="headerlink" href="#addkxcertssecrettonamespace" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/addKxCertsSecretToNamespace.sh" target="_blank">auto-setup/functions/addKxCertsSecretToNamespace.sh</a></p>
<p>Adds a secret into the component's namespace containing the KX.AS.CODE certificates. This is useful when the component needs to upload the certificates internally for end-to-end encryption, or it simply needs access to the KX.AS.CODE certificate for verification purposes.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>addKxCertsSecretToNamespace</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>addKxCertsSecretToNamespace
</code></pre></div></td></tr></table></div>
</div>
<h3 id="checkapplicationinstalled">checkApplicationInstalled()<a class="headerlink" href="#checkapplicationinstalled" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/checkApplicationInstalled.sh" target="_blank">auto-setup/functions/checkApplicationInstalled.sh</a></p>
<p>Checks if a given application is installed or not. This is important for application installations that rely on other solutions to be available. For example, if the configuration needs Mattermost to be installed before creating a notification webhook, this part of the installation process could be skipped if the application is not installed, rather than failing the whole installation, due to a missing dependency.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>checkApplicationInstalled "&lt;application name&gt;" "&lt;application category folder&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>checkApplicationInstalled<span class="w"> </span><span class="s2">&quot;gitlab&quot;</span><span class="w"> </span><span class="s2">&quot;cicd&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="checkimagefiletype">checkImageFileType()<a class="headerlink" href="#checkimagefiletype" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/checkImageFileType.sh" target="_blank">auto-setup/functions/checkImageFileType.sh</a></p>
<p>Returns the image file type for the image path passed into the function call.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>checkImageFileType "&lt;source image file path&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>checkImageFileType<span class="w"> </span><span class="s2">&quot;/usr/share/backgrounds/background.jpg&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="functionstart">functionStart()<a class="headerlink" href="#functionstart" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/functionStart.sh" target="_blank">auto-setup/functions/functionStart.sh</a></p>
<p>Is called at the start of each function. Include common steps such as enabling debug logging.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>functionStart</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>functionStart
</code></pre></div></td></tr></table></div>
</div>
<h3 id="functionend">functionEnd()<a class="headerlink" href="#functionend" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/functionEnd.sh" target="_blank">auto-setup/functions/functionEnd.sh</a></p>
<p>Is called at the start of each function. Include common steps such as disabling debug logging.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>functionEnd</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>functionEnd
</code></pre></div></td></tr></table></div>
</div>
<h3 id="getcpuarchitecture">getCpuArchitecture()<a class="headerlink" href="#getcpuarchitecture" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/getCpuArchitecture.sh" target="_blank">auto-setup/functions/getCpuArchitecture.sh</a></p>
<p>Sets the global <code>cpuArchitecture</code> variable to either <code>amd64</code> or <code>arm64</code>. This can then be used in scripts to decide which version of a binary ot install.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>getCpuArchitecture</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>getCpuArchitecture
</code></pre></div></td></tr></table></div>
</div>
<h3 id="getnginxcontrollerip">getNginxControllerIp()<a class="headerlink" href="#getnginxcontrollerip" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/getNginxControllerIp.sh" target="_blank">auto-setup/functions/getNginxControllerIp.sh</a></p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>nginxIngressIp</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Function returns the NGINX Ingress Controller&#39;s IP address. You will need to export the returned result to a variable.</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">nginxIngressIp</span><span class="o">=</span><span class="k">$(</span>getNginxControllerIp<span class="k">)</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="kubernetesgetserviceloadbalancerip">kubernetesGetServiceLoadBalancerIp()<a class="headerlink" href="#kubernetesgetserviceloadbalancerip" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/kubernetesGetServiceLoadBalancerIp.sh" target="_blank">auto-setup/functions/kubernetesGetServiceLoadBalancerIp.sh</a></p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
</div>
<p><code>kubernetesGetServiceLoadBalancerIp</code></p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Function returns the service&#39;s external load balancer IP address. You will need to export the returned result to a variable.</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">gitlabServiceIpAddress</span><span class="o">=</span><span class="k">$(</span>kubernetesGetServiceLoadBalancerIp<span class="w"> </span><span class="s2">&quot;gitlab-service&quot;</span><span class="w"> </span><span class="s2">&quot;gitlab&quot;</span><span class="k">)</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="installdebianpackage">installDebianPackage()<a class="headerlink" href="#installdebianpackage" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/installDebianPackage.sh" target="_blank">auto-setup/functions/installDebianPackage.sh</a></p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
</div>
<p><code>installDebianPackage "&lt;Debian package name&gt;"</code></p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Function installs the requested Debian package if not already installed.</span>
installDebianPackage<span class="w"> </span><span class="s2">&quot;vim&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="roundup">roundUp()<a class="headerlink" href="#roundup" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/arithmeticRoundUp.sh" target="_blank">auto-setup/functions/arithmeticRoundUp.sh</a></p>
<p>This rounds a number up rather than down, when a value if x.5. This was created to fix a mismatch between the calculation done in Ruby (the Vagrantfile), and later the same calculation in bash.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>roundUp &lt;floating point number&gt;</code></p>
</div>
<h3 id="checkdockerhubratelimit">checkDockerHubRateLimit()<a class="headerlink" href="#checkdockerhubratelimit" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/dockerhubCheck.sh" target="_blank">auto-setup/functions/dockerhubCheck.sh</a></p>
<p>Since Docker Hub limited the number of downloads for anonymous and fee account users, this function is called before every component installation, to make sure the user is not close to the limit (&lt;25), or the limit is used  up (0 download remaining).
Either find will result in a warning or error message respectively. This is to help the user understand why component installations may be failing due to image pull failures.</p>
<p>To solve this, a user can add their docker hub credentials to profile-config.json.</p>
<p>More details on the Docker Hub download rate limit can be found on the following <a href="https://docs.docker.com/docker-hub/download-rate-limit/" target="_blank">link</a>.</p>
<h3 id="downloadfile">downloadFile()<a class="headerlink" href="#downloadfile" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/downloadFile.sh" target="_blank">auto-setup/functions/downloadFile.sh</a></p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>downloadFile "&lt;file url&gt;" "&lt;sha256sum checksum&gt;" "&lt;output_filename&gt;"</code></p>
</div>
<p>If the output filename is not provided, the filename provided in the URL will be used instead.</p>
<p>It is recommended to add the <code>version</code> and <code>checksum</code> to the component's <code>metadata.json</code> as environment variables, and then reference those in the installation script, rather than hard coding both.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>metadata.json:</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;environment_variables&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;guacamoleVersion&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.3.0&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;guacamoleChecksum&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bc5511c7170841f90d437b5a07b7ec2f5bfd061f2a5bfc4e4d0fc4d7b303fb4c&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
script:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Download, build, install and enable Guacamole</span>
downloadFile<span class="w"> </span><span class="s2">&quot;https://apache.org/dyn/closer.cgi?action=download&amp;filename=guacamole/</span><span class="si">${</span><span class="nv">guacamoleVersion</span><span class="si">}</span><span class="s2">/source/guacamole-server-</span><span class="si">${</span><span class="nv">guacamoleVersion</span><span class="si">}</span><span class="s2">.tar.gz&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">guacamoleChecksum</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">installationWorkspace</span><span class="si">}</span><span class="s2">/guacamole-server-</span><span class="si">${</span><span class="nv">guacamoleVersion</span><span class="si">}</span><span class="s2">.tar.gz&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>log_info<span class="w"> </span><span class="s2">&quot;Return code received after downloading guacamole-server-</span><span class="si">${</span><span class="nv">guacamoleVersion</span><span class="si">}</span><span class="s2">.tar.gz is </span><span class="nv">$?</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="waitforfile">waitForFile()<a class="headerlink" href="#waitforfile" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/waitForFile.sh" target="_blank">auto-setup/functions/waitForFile.sh</a></p>
<p>Waits for a file to be at a given location. This is useful is a file is required before a next step in an installation process can be triggered, but is not available until other processing is completed.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>waitForFile "&lt;absolute path to file&gt;"</code></p>
</div>
<h3 id="checkurlhealth">checkUrlHealth()<a class="headerlink" href="#checkurlhealth" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/urlHealthCheck.sh" target="_blank">auto-setup/functions/urlHealthCheck.sh</a></p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>checkUrlHealth "&lt;url&gt;" "&lt;expected http response code&gt;" "&lt;basic authentication&gt;"</code></p>
</div>
<p>Basic authentication must have the form <code>"&lt;username&gt;:&lt;password&gt;"</code>. Basic authentication is optional. It is recommended to use the <code>managedPassword</code> function to store and retrieve the password securely.
The <code>URL</code> and expected <code>RC</code> are mandatory.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Call running KX-Portal to check status and pre-compile site</span>
checkUrlHealth<span class="w"> </span><span class="s2">&quot;http://localhost:3000&quot;</span><span class="w"> </span><span class="s2">&quot;200&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h2 id="gitlab">Gitlab<a class="headerlink" href="#gitlab" title="Permanent link">#</a></h2>
<p>Functions for interacting with the Gitlab API. Currently just 2 functions. These will be expanded in future.</p>
<h3 id="creategitlabproject">createGitlabProject()<a class="headerlink" href="#creategitlabproject" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/gitlabCreateProject.sh" target="_blank">auto-setup/functions/gitlabCreateProject.sh</a></p>
<p>Create a new project in Gitlab.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>createGitlabProject "&lt;project name&gt;" "&lt;group name&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>createGitlabProject<span class="w"> </span><span class="s2">&quot;grafana-image-renderer&quot;</span><span class="w"> </span><span class="s2">&quot;devops&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="gitlabcreategroup">gitlabCreateGroup()<a class="headerlink" href="#gitlabcreategroup" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/gitlabCreateGroup.sh" target="_blank">auto-setup/functions/gitlabCreateGroup.sh</a></p>
<p>Create a group in Gitlab.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>gitlabCreateGroup "&lt;group name&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>gitlabCreateGroup<span class="w"> </span><span class="s2">&quot;kx.as.code&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="gitlabcreategroupvariable">gitlabCreateGroupVariable()<a class="headerlink" href="#gitlabcreategroupvariable" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/gitlabCreateGroupVariable.sh" target="_blank">auto-setup/functions/gitlabCreateGroupVariable.sh</a></p>
<p>Add a group variable for use in CICD pipelines.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>gitlabCreateGroupVariable "&lt;variable name&gt;" "&lt;variable key&gt;" "&lt;variable value&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>gitlabCreateGroupVariable<span class="w"> </span><span class="s2">&quot;REGISTRY_ROBOT_PASSWORD&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">kxRobotToken</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">kxascodeGroupId</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="gitlabcreateuser">gitlabCreateUser()<a class="headerlink" href="#gitlabcreateuser" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/gitlabCreateUser.sh" target="_blank">auto-setup/functions/gitlabCreateUser.sh</a></p>
<p>Create a user in Gitlab.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>gitlabCreateUser "&lt;username&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>gitlabCreateUser<span class="w"> </span><span class="s2">&quot;joe.bloggs&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="gitlabgetgroupid">gitlabGetGroupId()<a class="headerlink" href="#gitlabgetgroupid" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/gitlabGetGroupId.sh" target="_blank">auto-setup/functions/gitlabGetGroupId.sh</a></p>
<p>Get the id of an existing user in Gitlab.</p>
<p>Get the id of an available group in Gitlab</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>gitlabGetGroupId "&lt;gitlab group&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nv">gitlabGroupId</span><span class="o">=</span><span class="k">$(</span>gitlabGetGroupId<span class="w"> </span><span class="s2">&quot;kx.as.code&quot;</span><span class="k">)</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="gitlabgetuserid">gitlabGetUserId()<a class="headerlink" href="#gitlabgetuserid" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/gitlabGetUserId.sh" target="_blank">auto-setup/functions/gitlabGetUserId.sh</a></p>
<p>Get the id of an available user in Gitlab</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>gitlabGetUserId "&lt;gitlab username&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nv">gitlabUserId</span><span class="o">=</span><span class="k">$(</span>gitlabGetUserId<span class="w"> </span><span class="s2">&quot;joe.bloggs&quot;</span><span class="k">)</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="gitlabmapusertogroup">gitlabMapUserToGroup()<a class="headerlink" href="#gitlabmapusertogroup" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/gitlabMapUserToGroup.sh" target="_blank">auto-setup/functions/gitlabMapUserToGroup.sh</a></p>
<p>Map a user to a group in Gitlab</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>gitlabMapUserToGroup "&lt;gitlab username&gt;" "&lt;gitlab group name&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>gitlabMapUserToGroup<span class="w"> </span><span class="s2">&quot;joe.bloggs&quot;</span><span class="w"> </span><span class="s2">&quot;kx.as.code&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="populategitlabproject">populateGitlabProject()<a class="headerlink" href="#populategitlabproject" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/gitlabPopulateProject.sh" target="_blank">auto-setup/functions/gitlabPopulateProject.sh</a></p>
<p>Populate a project in Gitlab with source code from a given directory.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>populateGitlabProject "&lt;gitlabProjectName&gt;" "&lt;gitlabRepoName&gt;" "&lt;sourceCodeLocation&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>populateGitlabProject<span class="w"> </span><span class="s2">&quot;devops&quot;</span><span class="w"> </span><span class="s2">&quot;grafana-image-renderer&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">autoSetupHome</span><span class="si">}</span><span class="s2">/monitoring/grafana/deployment_yaml&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h2 id="harbor">Harbor<a class="headerlink" href="#harbor" title="Permanent link">#</a></h2>
<h3 id="harborcreateproject">harborCreateProject()<a class="headerlink" href="#harborcreateproject" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/harborCreateProject.sh" target="_blank">auto-setup/functions/harborCreateProject.sh</a></p>
<p>Create a new project in Harbor.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>harborCreateProject "&lt;harbor project name&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>harborCreateProject<span class="w"> </span><span class="s2">&quot;kx-as-code&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="harborcreaterobotaccount">harborCreateRobotAccount()<a class="headerlink" href="#harborcreaterobotaccount" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/harborCreateRobotAccount.sh" target="_blank">auto-setup/functions/harborCreateRobotAccount.sh</a></p>
<p>Create a robot account for use in CICD pipelines.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>harborCreateRobotAccount "&lt;project id&gt;" "&lt;robot id name&gt;" "&lt;robot id short description&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Get Harbor Project Ids</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">kxHarborProjectId</span><span class="o">=</span><span class="k">$(</span>harborGetProjectId<span class="w"> </span><span class="s2">&quot;kx-as-code&quot;</span><span class="k">)</span>
<span class="c1"># Create Harbor robot account</span>
harborCreateRobotAccount<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">kxHarborProjectId</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;kx-cicd-user&quot;</span><span class="w"> </span><span class="s2">&quot;KX.AS.CODE CICD User&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="harborgetprojectid">harborGetProjectId()<a class="headerlink" href="#harborgetprojectid" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/harborGetProjectId.sh" target="_blank">auto-setup/functions/harborGetProjectId.sh</a></p>
<p>Get the id of a previously created project.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>harborGetProjectId "&lt;harbor project name&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">kxHarborProjectId</span><span class="o">=</span><span class="k">$(</span>harborGetProjectId<span class="w"> </span><span class="s2">&quot;kx-as-code&quot;</span><span class="k">)</span>
</code></pre></div></td></tr></table></div>
</div>
<h2 id="keycloak-iamsso">Keycloak IAM/SSO<a class="headerlink" href="#keycloak-iamsso" title="Permanent link">#</a></h2>
<p>These functions were generated to avoid repeating the same code for each component connected to Keycloak IAM/SSO.
For general documentation on how Keycloak IAM/SSO works, read the following <a href="https://www.keycloak.org/docs/latest/securing_apps/" target="_blank">documentation</a>.</p>
<details class="abstract">
<summary>Examples for using enableKeycloakSSOForSolution()</summary>
<p>In most situations, it should be enough to call <code>enableKeycloakSSOForSolution()</code> to create the SSO configuration in Keycloak for the respective component installation. Only in rare cases is this not possible, due to the particularities of the component for which SSO is being enabled. Expand this box to see examples.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p><a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/cicd/harbor/post_install_scripts/deployOidc.sh" target="_blank">Harbor Registry</a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Integrate solution with Keycloak</span>
<span class="nv">redirectUris</span><span class="o">=</span><span class="s2">&quot;https://</span><span class="si">${</span><span class="nv">componentName</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">baseDomain</span><span class="si">}</span><span class="s2">/c/oidc/callback&quot;</span>
<span class="nv">rootUrl</span><span class="o">=</span><span class="s2">&quot;https://</span><span class="si">${</span><span class="nv">componentName</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">baseDomain</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nv">baseUrl</span><span class="o">=</span><span class="s2">&quot;/applications&quot;</span>
<span class="nv">protocol</span><span class="o">=</span><span class="s2">&quot;openid-connect&quot;</span>
<span class="nv">fullPath</span><span class="o">=</span><span class="s2">&quot;false&quot;</span>
<span class="nv">scopes</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">componentName</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="c1"># space separated if multiple scopes need to be created/associated with the client</span>
<span class="hll">enableKeycloakSSOForSolution<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">redirectUris</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">rootUrl</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">baseUrl</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">protocol</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">fullPath</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">scopes</span><span class="si">}</span><span class="s2">&quot;</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p><a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/core/kubernetes-dashboard/post_install_scripts/deployOauth2.sh" target="_blank">Kubernetes Dashboard</a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Integrate solution with Keycloak</span>
<span class="nv">redirectUris</span><span class="o">=</span><span class="s2">&quot;https://</span><span class="si">${</span><span class="nv">componentName</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">baseDomain</span><span class="si">}</span><span class="s2">/login/generic_oauth&quot;</span>
<span class="nv">rootUrl</span><span class="o">=</span><span class="s2">&quot;https://</span><span class="si">${</span><span class="nv">componentName</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">baseDomain</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nv">baseUrl</span><span class="o">=</span><span class="s2">&quot;/login/generic_oauth&quot;</span>
<span class="nv">protocol</span><span class="o">=</span><span class="s2">&quot;openid-connect&quot;</span>
<span class="nv">fullPath</span><span class="o">=</span><span class="s2">&quot;true&quot;</span>
<span class="nv">scopes</span><span class="o">=</span><span class="s2">&quot;groups&quot;</span><span class="w"> </span><span class="c1"># space separated if multiple scopes need to be created/associated with the client</span>
<span class="hll">enableKeycloakSSOForSolution<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">redirectUris</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">rootUrl</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">baseUrl</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">protocol</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">fullPath</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">scopes</span><span class="si">}</span><span class="s2">&quot;</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p><a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/monitoring/grafana/pre_install_scripts/configureOauthLogin.sh" target="_blank">Grafana</a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Integrate solution with Keycloak</span>
<span class="nv">redirectUris</span><span class="o">=</span><span class="s2">&quot;https://</span><span class="si">${</span><span class="nv">componentName</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">baseDomain</span><span class="si">}</span><span class="s2">/login/generic_oauth&quot;</span>
<span class="nv">rootUrl</span><span class="o">=</span><span class="s2">&quot;https://</span><span class="si">${</span><span class="nv">componentName</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">baseDomain</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nv">baseUrl</span><span class="o">=</span><span class="s2">&quot;/login/generic_oauth&quot;</span>
<span class="nv">protocol</span><span class="o">=</span><span class="s2">&quot;openid-connect&quot;</span>
<span class="nv">fullPath</span><span class="o">=</span><span class="s2">&quot;true&quot;</span>
<span class="nv">scopes</span><span class="o">=</span><span class="s2">&quot;groups&quot;</span><span class="w"> </span><span class="c1"># space separated if multiple scopes need to be created/associated with the client</span>
<span class="hll">enableKeycloakSSOForSolution<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">redirectUris</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">rootUrl</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">baseUrl</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">protocol</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">fullPath</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">scopes</span><span class="si">}</span><span class="s2">&quot;</span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p><a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/collaboration/mattermost/pre_install_scripts/createOidcConfig.sh" target="_blank">Mattermost</a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Integrate solution with Keycloak</span>
<span class="nv">redirectUris</span><span class="o">=</span><span class="s2">&quot;https://</span><span class="si">${</span><span class="nv">componentName</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">baseDomain</span><span class="si">}</span><span class="s2">/signup/gitlab/complete&quot;</span>
<span class="nv">rootUrl</span><span class="o">=</span><span class="s2">&quot;https://</span><span class="si">${</span><span class="nv">componentName</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">baseDomain</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nv">baseUrl</span><span class="o">=</span><span class="s2">&quot;/applications&quot;</span>
<span class="nv">protocol</span><span class="o">=</span><span class="s2">&quot;openid-connect&quot;</span>
<span class="nv">fullPath</span><span class="o">=</span><span class="s2">&quot;false&quot;</span>
<span class="nv">scopes</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">componentName</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="c1"># space separated if multiple scopes need to be created/associated with the client</span>
<span class="hll">enableKeycloakSSOForSolution<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">redirectUris</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">rootUrl</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">baseUrl</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">protocol</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">fullPath</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">scopes</span><span class="si">}</span><span class="s2">&quot;</span>
</span></code></pre></div></td></tr></table></div>
</div>
<p>Here also examples where it was not possible to use the <code>enableKeycloakSSOForSolution()</code> function, as some additional steps were necessary.</p>
<p><a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/cicd/argocd/post_install_scripts/deployOauth2.sh" target="_blank">ArgoCD</a></p>
<p><a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/cicd/gitlab/pre_install_scripts/createOAuth.sh" target="_blank">Gitlab</a></p>
</details>
<h3 id="createkeycloakclient">createKeycloakClient()<a class="headerlink" href="#createkeycloakclient" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/keycloakCreateClient.sh" target="_blank">auto-setup/functions/keycloakCreateClient.sh</a></p>
<p>Creates a client in Keycloak for the component.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>createKeycloakClient "&lt;redirectUris&gt;" "&lt;rootUrl&gt;" "&lt;baseUrl&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Create Keycloak Client</span>
<span class="nv">redirectUris</span><span class="o">=</span><span class="s2">&quot;https://</span><span class="si">${</span><span class="nv">componentName</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">baseDomain</span><span class="si">}</span><span class="s2">/users/auth/openid_connect/callback&quot;</span>
<span class="nv">rootUrl</span><span class="o">=</span><span class="s2">&quot;https://</span><span class="si">${</span><span class="nv">componentName</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">baseDomain</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nv">baseUrl</span><span class="o">=</span><span class="s2">&quot;/&quot;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">clientId</span><span class="o">=</span><span class="k">$(</span>createKeycloakClient<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">redirectUris</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">rootUrl</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">baseUrl</span><span class="si">}</span><span class="s2">&quot;</span><span class="k">)</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="createkeycloakclientscope">createKeycloakClientScope()<a class="headerlink" href="#createkeycloakclientscope" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/keycloakCreateClientScope.sh" target="_blank">auto-setup/functions/keycloakCreateClientScope.sh</a></p>
<p>Creates a new client scope for a given client id in Keycloak.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>createKeycloakClientScope "&lt;clientId&gt;" "&lt;protocol&gt;" "&lt;scope&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Create Keycloak Client Scopes (if not already existing)</span>
<span class="nv">protocol</span><span class="o">=</span><span class="s2">&quot;openid-connect&quot;</span>
<span class="nv">scope</span><span class="o">=</span><span class="s2">&quot;groups&quot;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">clientScopeId</span><span class="o">=</span><span class="k">$(</span>createKeycloakClientScope<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">clientId</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">protocol</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">scope</span><span class="si">}</span><span class="s2">&quot;</span><span class="k">)</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="createkeycloakgroup">createKeycloakGroup()<a class="headerlink" href="#createkeycloakgroup" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/keycloakCreateGroup.sh" target="_blank">auto-setup/functions/keycloakCreateGroup.sh</a></p>
<p>Creates a new user group in Keycloak.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>createKeycloakGroup "&lt;group name&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">    </span><span class="c1"># Create Keycloak Group (if not already existing)</span>
<span class="w">    </span><span class="nv">group</span><span class="o">=</span><span class="s2">&quot;ArgoCDAdmins&quot;</span>
<span class="w">    </span><span class="nb">export</span><span class="w"> </span><span class="nv">groupId</span><span class="o">=</span><span class="k">$(</span>createKeycloakGroup<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">group</span><span class="si">}</span><span class="s2">&quot;</span><span class="k">)</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="createkeycloakprotocolmapper">createKeycloakProtocolMapper()<a class="headerlink" href="#createkeycloakprotocolmapper" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/keycloakCreateProtocolMapper.sh" target="_blank">auto-setup/functions/keycloakCreateProtocolMapper.sh</a></p>
<p>Creates a protocol mapper for a given client id</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>createKeycloakProtocolMapper "&lt;clientId&gt;" "&lt;fullPath&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nv">fullPath</span><span class="o">=</span><span class="s2">&quot;false&quot;</span>
createKeycloakProtocolMapper<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">clientId</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">fullPath</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="createkeycloakuser">createKeycloakUser()<a class="headerlink" href="#createkeycloakuser" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/keycloakCreateUser.sh" target="_blank">auto-setup/functions/keycloakCreateUser.sh</a></p>
<p>Create a new user in Keycloak.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>createKeycloakUser "&lt;username&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Export Keycloak User Id (if not already existing)</span>
<span class="nv">user</span><span class="o">=</span><span class="s2">&quot;admin&quot;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">userId</span><span class="o">=</span><span class="k">$(</span>createKeycloakUser<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">user</span><span class="si">}</span><span class="s2">&quot;</span><span class="k">)</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="enablekeycloakssoforsolution">enableKeycloakSSOForSolution()<a class="headerlink" href="#enablekeycloakssoforsolution" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/keycloakEnableSolution.sh" target="_blank">auto-setup/functions/keycloakEnableSolution.sh</a></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>This is usually the only Keycloak function you need to call when creating a new client in Keycloak, as this function, given all the inputs passed to it, takes care to call all the other needed functions.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>enableKeycloakSSOForSolution "&lt;redirectUris&gt;" "&lt;rootUrl&gt;" "&lt;baseUrl&gt;" "&lt;protocol&gt;" "&lt;fullPath&gt;" "&lt;scopes&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Integrate solution with Keycloak</span>
<span class="nv">redirectUris</span><span class="o">=</span><span class="s2">&quot;https://</span><span class="si">${</span><span class="nv">componentName</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">baseDomain</span><span class="si">}</span><span class="s2">/login/generic_oauth&quot;</span>
<span class="nv">rootUrl</span><span class="o">=</span><span class="s2">&quot;https://</span><span class="si">${</span><span class="nv">componentName</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">baseDomain</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nv">baseUrl</span><span class="o">=</span><span class="s2">&quot;/login/generic_oauth&quot;</span>
<span class="nv">protocol</span><span class="o">=</span><span class="s2">&quot;openid-connect&quot;</span>
<span class="nv">fullPath</span><span class="o">=</span><span class="s2">&quot;true&quot;</span>
<span class="nv">scopes</span><span class="o">=</span><span class="s2">&quot;groups&quot;</span><span class="w"> </span><span class="c1"># space separated if multiple scopes need to be created/associated with the client</span>
enableKeycloakSSOForSolution<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">redirectUris</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">rootUrl</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">baseUrl</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">protocol</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">fullPath</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">scopes</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="getkeycloakclientid">getKeycloakClientId()<a class="headerlink" href="#getkeycloakclientid" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/keycloakGetClientId.sh" target="_blank">auto-setup/functions/keycloakGetClientId.sh</a></p>
<p>Get the client id for a given client.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>getKeycloakClientId "&lt;client name&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Get Keycloak Client Id</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">clientId</span><span class="o">=</span><span class="k">$(</span>getKeycloakClientId<span class="w"> </span><span class="s2">&quot;kubernetes&quot;</span><span class="k">)</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="getkeycloakclientsecret">getKeycloakClientSecret()<a class="headerlink" href="#getkeycloakclientsecret" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/keycloakGetClientSecret.sh" target="_blank">auto-setup/functions/keycloakGetClientSecret.sh</a></p>
<p>Get the client secret for a given client.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>getKeycloakClientSecret "&lt;clientId&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Get Keycloak Client Secret</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">clientSecret</span><span class="o">=</span><span class="k">$(</span>getKeycloakClientSecret<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">clientId</span><span class="si">}</span><span class="s2">&quot;</span><span class="k">)</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="keycloaklogin">keycloakLogin()<a class="headerlink" href="#keycloaklogin" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/keycloakLogin.sh" target="_blank">auto-setup/functions/keycloakLogin.sh</a></p>
<p>Login to Keycloak. This is required before launching any Keycloak CLI commands .</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>This rarely needs to be called directly, as the other Keycloak functions already call this function before interacting with Keycloak.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Call function to login to Keycloak</span>
keycloakLogin
</code></pre></div></td></tr></table></div>
</div>
<h3 id="mapkeycloakusertogroup">mapKeycloakUserToGroup()<a class="headerlink" href="#mapkeycloakusertogroup" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/keycloakMapUserToGroup.sh" target="_blank">auto-setup/functions/keycloakMapUserToGroup.sh</a></p>
<p>Maps a user in Keycloak to a Keycloak user group. Ensure the user is created beforehand if not already existing.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>mapKeycloakUserToGroup "&lt;userId&gt;" "&lt;groupId&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Add user admin to the ArgoCDAdmins group. If any new users are created then they should be added to ArgoCDAdmins group</span>
<span class="nv">groupMappingId</span><span class="o">=</span><span class="k">$(</span>mapKeycloakUserToGroup<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">userId</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">groupId</span><span class="si">}</span><span class="s2">&quot;</span><span class="k">)</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="sourcekeycloakenvironment">sourceKeycloakEnvironment()<a class="headerlink" href="#sourcekeycloakenvironment" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/keycloakSourceEnvironment.sh" target="_blank">auto-setup/functions/keycloakSourceEnvironment.sh</a></p>
<p>This function sets all the environment variables needed to successfully execute the Keycloak functions.
The environment variables set are the following:</p>
<table>
<thead>
<tr>
<th>Variable name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>kcRealm</td>
<td>The Keycloak Realm, set to the full baseDomain (environment prefix + base domain).</td>
</tr>
<tr>
<td>kcInternalUrl</td>
<td>The Keycloak API URL for interacting with Keycloak from inside the Keycloak container.</td>
</tr>
<tr>
<td>kcAdmCli</td>
<td>The Keycloak CLI script to execute inside the Keycloak container.</td>
</tr>
<tr>
<td>kcPod</td>
<td>The name of the Kubernetes pod containing the Keycloak container</td>
</tr>
<tr>
<td>kcContainer</td>
<td>The name of the Keycloak container in the Keycloak pod</td>
</tr>
<tr>
<td>kcNamespace</td>
<td>The Keycloak Kubernetes namespace</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p>sourceKeycloakEnvironment</p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Source Keycloak Environment</span>
sourceKeycloakEnvironment
</code></pre></div></td></tr></table></div>
</div>
<h2 id="kubernetes">Kubernetes<a class="headerlink" href="#kubernetes" title="Permanent link">#</a></h2>
<h3 id="kubernetesapplyyamlfile">kubernetesApplyYamlFile()<a class="headerlink" href="#kubernetesapplyyamlfile" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/kubernetesApplyYamlFile.sh" target="_blank">auto-setup/functions/kubernetesApplyYamlFile.sh</a></p>
<p>Executes the following actions against the YAML file path passed to it.</p>
<ul>
<li>Environment variable replacement for <code>{{ mustache_variables }}</code></li>
<li>Validation of YAML via <a href="https://kubeval.instrumenta.dev/">KubeVal</a></li>
<li>kubectl apply of the YAML file to the specified namespace</li>
</ul>
<p>If no namespace is provided, the resource will be applied to the <code>default</code> namespace - where relevant. Some resources do not live in a namespace, so for these, the namespace will be ignored.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>kubernetesApplyYamlFile "&lt;YAML file absolute path&gt;" "&lt;optional target kubernetes namespace&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>kubernetesApplyYamlFile<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">installationWorkspace</span><span class="si">}</span><span class="s2">/kadalu-server-storage-pool-statefulset.yaml&quot;</span><span class="w"> </span><span class="s2">&quot;kadalu&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="kubernetesexportresource">kubernetesExportResource()<a class="headerlink" href="#kubernetesexportresource" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/kubernetesExportResource.sh" target="_blank">auto-setup/functions/kubernetesExportResource.sh</a></p>
<p>Does more than export a Kubernetes resource to a YAML file. It also strips it of the version specific items, to avoid issues during a <code>kubectl apply</code>.</p>
<p>The default process is as follows:</p>
<ol>
<li>Export the resource as JSON</li>
<li>Use JSON processing to remove the kube management and version line items</li>
<li>Convert to YAML</li>
</ol>
<p>If the selected output method is JSON (reason could be the need for additional JSON manipulation before converting to YAML), then the 3rd step will not be executed.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>kubernetesExportResource<span class="w"> </span><span class="s2">&quot;&lt;resource name to export&gt;&quot;</span><span class="w"> </span><span class="s2">&quot;&lt;kubernetes resource type&gt;&quot;</span><span class="w"> </span><span class="s2">&quot;&lt;kubernetes namespace&gt;&quot;</span><span class="w"> </span><span class="s2">&quot;&lt;yaml or json&gt;&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>kubernetesExportResource<span class="w"> </span><span class="s2">&quot;coredns&quot;</span><span class="w"> </span><span class="s2">&quot;configmap&quot;</span><span class="w"> </span><span class="s2">&quot;kube-system&quot;</span><span class="w"> </span><span class="s2">&quot;json&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="kuberneteshealthcheck">kubernetesHealthCheck()<a class="headerlink" href="#kuberneteshealthcheck" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/kubernetesHealthCheck.sh" target="_blank">auto-setup/functions/kubernetesHealthCheck.sh</a></p>
<p>Calls the Kubernetes health API. This is important for some procecesses that result in a temporary down-time of Kubernetes. This function lets the next steps know when Kubernetes is back online and healthy.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>kubernetesHealthCheck</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>kubernetesHealthCheck
</code></pre></div></td></tr></table></div>
</div>
<h3 id="waitforkubernetesresource">waitForKubernetesResource()<a class="headerlink" href="#waitforkubernetesresource" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/waitForKubernetesResource.sh" target="_blank">auto-setup/functions/waitForKubernetesResource.sh</a></p>
<p>This checks and waits for a Kubernetes resource to become available. This is needed if a step, such as <code>kubernetesExportResource()</code> for example, needs a resource to be available before it can be successfully executed.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>waitForKubernetesResource "&lt;resource name&gt;" "&lt;kubernetes resource type&gt;" "&lt;kubernetes namespace&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>waitForKubernetesResource<span class="w"> </span><span class="s2">&quot;server-storage-pool-1-0&quot;</span><span class="w"> </span><span class="s2">&quot;statefulset&quot;</span><span class="w"> </span><span class="s2">&quot;kadalu&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h2 id="logging">Logging<a class="headerlink" href="#logging" title="Permanent link">#</a></h2>
<h3 id="log_debug">log_debug()<a class="headerlink" href="#log_debug" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/logDebug.sh" target="_blank">auto-setup/functions/logDebug.sh</a></p>
<p>Send message with timestamp and [DEBUG] prefix to KX.AS.CODE installation log.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>log_debug "&lt;log message&gt;"</code></p>
</div>
<h3 id="log_error">log_error()<a class="headerlink" href="#log_error" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/logError.sh" target="_blank">auto-setup/functions/logError.sh</a></p>
<p>Send message with timestamp and [ERROR] prefix to KX.AS.CODE installation log.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>log_error "&lt;log message&gt;"</code></p>
</div>
<h3 id="log_info">log_info()<a class="headerlink" href="#log_info" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/logInfo.sh" target="_blank">auto-setup/functions/logInfo.sh</a></p>
<p>Send message with timestamp and [INFO] prefix to KX.AS.CODE installation log.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>log_info "&lt;log message&gt;"</code></p>
</div>
<h3 id="log_warn">log_warn()<a class="headerlink" href="#log_warn" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/logWarn.sh" target="_blank">auto-setup/functions/logWarn.sh</a></p>
<p>Send message with timestamp and [WARN] prefix to KX.AS.CODE installation log.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>log_warn "&lt;log message&gt;"</code></p>
</div>
<h2 id="mattermost">Mattermost<a class="headerlink" href="#mattermost" title="Permanent link">#</a></h2>
<h3 id="mattermostcreatechannel">mattermostCreateChannel()<a class="headerlink" href="#mattermostcreatechannel" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/mattermostCreateChannel.sh" target="_blank">auto-setup/functions/mattermostCreateChannel.sh</a></p>
<p>Create a Mattermost channel.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>mattermostCreateChannel "&lt;channel name&gt;" "&lt;team id&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Get Mattermost team id</span>
<span class="nv">kxascodeTeamId</span><span class="o">=</span><span class="k">$(</span>mattermostGetTeamId<span class="w"> </span><span class="s2">&quot;kxascode&quot;</span><span class="k">)</span>
<span class="c1"># Add Channels</span>
mattermostCreateChannel<span class="w"> </span><span class="s2">&quot;Security&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">kxascodeTeamId</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="mattermostcreateteam">mattermostCreateTeam()<a class="headerlink" href="#mattermostcreateteam" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/mattermostCreateTeam.sh" target="_blank">auto-setup/functions/mattermostCreateTeam.sh</a></p>
<p>Create a Mattermost team.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>mattermostCreateTeam "&lt;team name&gt;" "&lt;team headline&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>mattermostCreateTeam<span class="w"> </span><span class="s2">&quot;kxascode&quot;</span><span class="w"> </span><span class="s2">&quot;Team KX.AS.CODE&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="mattermostcreateuser">mattermostCreateUser()<a class="headerlink" href="#mattermostcreateuser" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/mattermostCreateUser.sh" target="_blank">auto-setup/functions/mattermostCreateUser.sh</a></p>
<p>Create a Mattermost user.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>mattermostCreateUser "&lt;username&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Create technical user for posting notifications</span>
mattermostCreateUser<span class="w"> </span><span class="s2">&quot;security&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="mattermostcreatewebhook">mattermostCreateWebhook()<a class="headerlink" href="#mattermostcreatewebhook" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/mattermostCreateWebhook.sh" target="_blank">auto-setup/functions/mattermostCreateWebhook.sh</a></p>
<p>Create a Mattermost webhook.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>mattermostCreateWebhook "&lt;mattermost webhook name&gt;" "&lt;mattermost team name&gt;" "&lt;mattermost channel name&gt;" "&lt;mattermost webhook avatar url&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>mattermostCreateWebhook<span class="w"> </span><span class="s2">&quot;cicd&quot;</span><span class="w"> </span><span class="s2">&quot;kxascode&quot;</span><span class="w"> </span><span class="s2">&quot;CICD&quot;</span><span class="w"> </span><span class="s2">&quot;https://about.gitlab.com/images/press/logo/png/gitlab-logo-500.png&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="mattermostgetchannelid">mattermostGetChannelId()<a class="headerlink" href="#mattermostgetchannelid" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/mattermostGetChannelId.sh" target="_blank">auto-setup/functions/mattermostGetChannelId.sh</a></p>
<p>Get a Mattermost channel id.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>mattermostGetChannelId "&lt;mattermost team name&gt;" "&lt;mattermost channel name&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nv">channelId</span><span class="o">=</span><span class="k">$(</span>mattermostGetChannelId<span class="w"> </span><span class="s2">&quot;kxascode&quot;</span><span class="w"> </span><span class="s2">&quot;Security&quot;</span><span class="k">)</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="mattermostgetlogintoken">mattermostGetLoginToken()<a class="headerlink" href="#mattermostgetlogintoken" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/mattermostGetLoginToken.sh" target="_blank">auto-setup/functions/mattermostGetLoginToken.sh</a></p>
<p>This is normally called automatically before performing any of the other Mattermost calls. It gets the login token needed to authorize next steps.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>mattermostGetLoginToken "&lt;usernmame&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nv">mattermostLoginToken</span><span class="o">=</span><span class="k">$(</span>mattermostGetLoginToken<span class="w"> </span><span class="s2">&quot;admin&quot;</span><span class="k">)</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="mattermostgetteamid">mattermostGetTeamId()<a class="headerlink" href="#mattermostgetteamid" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/mattermostGetTeamId.sh" target="_blank">auto-setup/functions/mattermostGetTeamId.sh</a></p>
<p>Get a Mattermost team id.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>mattermostGetTeamId "&lt;mattermost team name&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Get Mattermost team id</span>
<span class="nv">kxascodeTeamId</span><span class="o">=</span><span class="k">$(</span>mattermostGetTeamId<span class="w"> </span><span class="s2">&quot;kxascode&quot;</span><span class="k">)</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="mattermostgetuserid">mattermostGetUserId()<a class="headerlink" href="#mattermostgetuserid" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/mattermostGetUserId.sh" target="_blank">auto-setup/functions/mattermostGetUserId.sh</a></p>
<p>Get a Mattermost user id.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>mattermostGetUserId "&lt;mattermost username&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Get Mattermost User Id</span>
<span class="nv">mattermostUserId</span><span class="o">=</span><span class="k">$(</span>mattermostGetUserId<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">mattermostUsername</span><span class="si">}</span><span class="s2">&quot;</span><span class="k">)</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="mattermostmapusertoteam">mattermostMapUserToTeam()<a class="headerlink" href="#mattermostmapusertoteam" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/mattermostMapUserToTeam.sh" target="_blank">auto-setup/functions/mattermostMapUserToTeam.sh</a></p>
<p>Map a Mattermost user to a Mattermost Team.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>mattermostMapUserToTeam "&lt;mattermost username&gt;" "&lt;mattermost team name&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>mattermostMapUserToTeam<span class="w"> </span><span class="s2">&quot;securty&quot;</span><span class="w"> </span><span class="s2">&quot;kxascode&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h2 id="minio-s3">MinIO-S3<a class="headerlink" href="#minio-s3" title="Permanent link">#</a></h2>
<h3 id="minios3createbucket">minioS3CreateBucket()<a class="headerlink" href="#minios3createbucket" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/minioS3CreateBucket.sh" target="_blank">auto-setup/functions/minioS3CreateBucket.sh</a></p>
<p>Create bucket in MinIO-S3.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>minioS3CreateBucket "&lt;bucket name&gt;" "&lt;minio tenant&gt;" "&lt;aws compatible region&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>minioS3CreateBucket<span class="w"> </span><span class="s2">&quot;mattermost-file-storage&quot;</span><span class="w"> </span><span class="s2">&quot;mattermost&quot;</span><span class="w"> </span><span class="s2">&quot;eu-central-1&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="minios3createserviceaccount">minioS3CreateServiceAccount()<a class="headerlink" href="#minios3createserviceaccount" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/minioS3CreateServiceAccount.sh" target="_blank">auto-setup/functions/minioS3CreateServiceAccount.sh</a></p>
<p>Create MinIO service account. TRhe generated service account's api key and secret will be published to GoPass.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>minioS3CreateServiceAccount "&lt;minio service account name&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>minioS3CreateServiceAccount<span class="w"> </span><span class="s2">&quot;kxascode-sa&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="minios3createtenant">minioS3CreateTenant()<a class="headerlink" href="#minios3createtenant" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/minioS3CreateTenant.sh" target="_blank">auto-setup/functions/minioS3CreateTenant.sh</a></p>
<p>Creates a new tenant in <a href="https://docs.min.io/minio/k8s/tenant-management/deploy-minio-tenant.html" target="_blank">MinIO</a>. See here for more information on MinIO tenants.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>minioS3CreateTenant "&lt;tenant name&gt;"</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>minioS3CreateTenant<span class="w"> </span><span class="s2">&quot;gitlab&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="minios3getaccessandsecretkeys">minioS3GetAccessAndSecretKeys()<a class="headerlink" href="#minios3getaccessandsecretkeys" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/minioS3GetAccessAndSecretKeys.sh" target="_blank">auto-setup/functions/minioS3GetAccessAndSecretKeys.sh</a></p>
<p>Sets two global variables, <code>minioAccessKey</code> and <code>minioSecretKey</code>, that can be used in subsequent steps.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>minioS3GetAccessAndSecretKeys &lt;service account name&gt;</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>minioS3GetAccessAndSecretKeys<span class="w"> </span><span class="s2">&quot;gitlab&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<h3 id="minios3initialize">minioS3Initialize()<a class="headerlink" href="#minios3initialize" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/minioS3Initialize.sh" target="_blank">auto-setup/functions/minioS3Initialize.sh</a></p>
<p>Basic steps to allow the MinIO instance to be manageable via MinIO's command line tool - <code>mc</code>.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
<p><code>minioS3Initialize</code></p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>minioS3Initialize
</code></pre></div></td></tr></table></div>
</div>
<h2 id="notifications">Notifications<a class="headerlink" href="#notifications" title="Permanent link">#</a></h2>
<h3 id="addtonotificationqueue">addToNotificationQueue()<a class="headerlink" href="#addtonotificationqueue" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/addToNotificationQueue.sh" target="_blank">auto-setup/functions/addToNotificationQueue.sh</a></p>
<p>Adds a notification to the RabbitMQ <code>notification_queue</code>.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
</div>
<p>This is called by <code>notifyAllChannels</code> and most likely no need to call it on its own.</p>
<h3 id="notify">notify()<a class="headerlink" href="#notify" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/notify.sh" target="_blank">auto-setup/functions/notify.sh</a></p>
<p>Sends a notification to the desktop. It receives the <code>message</code> as input, as well <code>dialogue_type</code>, which can be either <code>info</code> (shows as blue), <code>warn</code> (orange) or <code>error</code> (red).</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
</div>
<p><code>notify "&lt;message&gt;" "&lt;dialog_type&gt;"</code></p>
<p>Send a notification to the Linux desktop only. Preferred method is to send a notification to all channels, which results in the notification also being displayed in the KX-Portal NodeJS webapp.
See function, <em>notifyAllChannels</em>.</p>
<h3 id="notifyallchannels">notifyAllChannels()<a class="headerlink" href="#notifyallchannels" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/notifyAllChannels.sh" target="_blank">auto-setup/functions/notifyAllChannels.sh</a></p>
<p>Send a notification to both the Linux desktop and to the KX-Portal via the RabbitMQ "notification_queue".</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
</div>
<p><code>notifyAllChannels "&lt;message&gt;" "&lt;log_level&gt;" "&lt;action_status&gt;"</code></p>
<table>
<thead>
<tr>
<th>Field Name</th>
<th>Description</th>
<th>Possible Values</th>
</tr>
</thead>
<tbody>
<tr>
<td>message</td>
<td>The alert text that should be displayed on the desktop or in the KX-Portal</td>
<td>Free-form text. No restriction.</td>
</tr>
<tr>
<td>log_level</td>
<td>The type of notification dialogue to show</td>
<td>info (shows as blue), warn (orange) or error (red)</td>
</tr>
<tr>
<td>status</td>
<td>This should be the status of the last action, eg. install</td>
<td>success, failure</td>
</tr>
</tbody>
</table>
<h2 id="rabbitmq-core-setup">RabbitMQ Core Setup<a class="headerlink" href="#rabbitmq-core-setup" title="Permanent link">#</a></h2>
<p>These are part of the core setup and should never need to be called separately by any of the component installation routines.</p>
<h3 id="checkrabbitmq">checkRabbitMq()<a class="headerlink" href="#checkrabbitmq" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/rabbitMQCheck.sh" target="_blank">auto-setup/functions/rabbitMQCheck.sh</a></p>
<p>Checks if <code>rabbitmqadmin</code> is installed. If not, installed it, including setting up bash completion scripts.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
</div>
<p><code>checkRabbitMq</code></p>
<h3 id="createrabbitmqexchange">createRabbitMQExchange()<a class="headerlink" href="#createrabbitmqexchange" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/rabbitMQExchangeCreation.sh" target="_blank">auto-setup/functions/rabbitMQExchangeCreation.sh</a></p>
<p>Creates the rabbitMQ exchange if not already present.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
</div>
<p><code>createRabbitMQExchange</code></p>
<h3 id="createrabbitmqqueues">createRabbitMQQueues()<a class="headerlink" href="#createrabbitmqqueues" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/rabbitMQQueuesCreation.sh" target="_blank">auto-setup/functions/rabbitMQQueuesCreation.sh</a></p>
<p>Creates the rabbitMQ queues if not already present.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
</div>
<p><code>createRabbitMQQueues</code></p>
<h3 id="createrabbitmqworkflowbindings">createRabbitMQWorkflowBindings()<a class="headerlink" href="#createrabbitmqworkflowbindings" title="Permanent link">#</a></h3>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg></span> Location: <a href="https://github.com/Accenture/kx.as.code/tree/main/auto-setup/functions/rabbitMQWorkflowBindingsCreation.sh" target="_blank">auto-setup/functions/rabbitMQWorkflowBindingsCreation.sh</a></p>
<p>Creates the rabbitMQ workflow bindings if not already present.</p>
<div class="admonition note">
<p class="admonition-title">Usage</p>
</div>
<p><code>createRabbitMQWorkflowBindings</code></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes", "navigation.sections", "navigation.top", "navigation.tracking", "navigation.expand", "search.highlight", "search.share", "search.suggest"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8d2eff1.min.js"></script>
      
        <script src="../../assets/js/custom.js"></script>
      
    
  </body>
</html>